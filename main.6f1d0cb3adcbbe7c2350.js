(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"93cA":function(e,t,n){e.exports=n.p+"c37b97b969656107e679d7ad8ef77a79.woff"},J6RI:function(e,t,n){t=e.exports=n("JPst")(!1);var a=n("HeW1"),o=a(n("aZUD")),r=a(n("93cA")),i=a(n("cEfc"));t.push([e.i,'\n/* COLOR PALETTE */\n:root {\n    --GR1: #191a1d;\n    --GR2: #202124;\n    --GR3: #2d2e30;\n    --GR4: #3f4042;\n    --GR5: #d9d9d9;\n}\n\n/* GLOBAL */\nbody {\n    margin: 0;\n    background-color: var(--GR1);\n}\n\n#globe {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: -1;\n}\n\n/* FONTS */\n@font-face {\n    font-family: "din";\n    src: url('+o+") format('woff');\n}\n@font-face {\n    font-family: \"din\";\n    src: url("+r+") format('woff');\n    font-weight: bold;\n}\n@font-face {\n    font-family: \"din\";\n    src: url("+i+") format('woff');\n    font-style: italic;\n}\n* { font-family: \"din\" }\n\n/* HEADER */\nheader {\n    color: var(--GR5);\n    font-weight: bold;\n    width: 100%;\n    height: 95%;\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    z-index: -1;\n}\nheader .main {\n    margin: auto;\n    margin-left: 2%;\n    width: 46%;\n    padding-top: 5%;\n}\nheader .pretitle {\n    font-size: 4em;\n}\nheader .title {\n    font-size: 7em;\n}\n\n/* SECTIONS */\nsection {\n    width: 100%;\n    height: 95%;\n}\n\nsection h1 {\n    padding-top: 0.5em;\n    margin-top: 0;\n    font-size: 5em;\n    text-align: center;\n}\n\n/* NAV */\nnav {\n    width: 100%;\n    height: 5%;\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    background-color: var(--GR5);\n}\n\n.dark {\n    color: var(--GR5);\n    background-color: var(--GR1);\n}\n.gray {\n    color: var(--GR5);\n    background-color: var(--GR4);\n}\n.white {\n    color: var(--GR2);\n    background-color: var(--GR5);\n}\n\n\n.test {\n    position: relative;\n}",""])},OMi8:function(e,t,n){var a=n("J6RI");"string"==typeof a&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1};n("LboF")(a,o);a.locals&&(e.exports=a.locals)},aZUD:function(e,t,n){e.exports=n.p+"7d2271b97e1fc197a8410ec269814cbc.woff"},cEfc:function(e,t,n){e.exports=n.p+"e6713781e2b16fe3b5fafd8117433ee4.woff"},tjUo:function(e,t,n){"use strict";n.r(t);n("OMi8");function l(e,t){var n,a,o,r,i;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new ne.z,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:ne.k.ROTATE,MIDDLE:ne.k.DOLLY,RIGHT:ne.k.PAN},this.touches={ONE:ne.w.ROTATE,TWO:ne.w.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return m.phi},this.getAzimuthalAngle=function(){return m.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(c),s.update(),d=p.NONE},this.update=(n=new ne.z,a=(new ne.q).setFromUnitVectors(e.up,new ne.z(0,1,0)),o=a.clone().inverse(),r=new ne.z,i=new ne.q,function(){var e=s.object.position;return n.copy(e).sub(s.target),n.applyQuaternion(a),m.setFromVector3(n),s.autoRotate&&d===p.NONE&&_(2*Math.PI/60/60*s.autoRotateSpeed),s.enableDamping?(m.theta+=f.theta*s.dampingFactor,m.phi+=f.phi*s.dampingFactor):(m.theta+=f.theta,m.phi+=f.phi),m.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,m.theta)),m.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,m.phi)),m.makeSafe(),m.radius*=y,m.radius=Math.max(s.minDistance,Math.min(s.maxDistance,m.radius)),!0===s.enableDamping?s.target.addScaledVector(v,s.dampingFactor):s.target.add(v),n.setFromSpherical(m),n.applyQuaternion(o),e.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(f.theta*=1-s.dampingFactor,f.phi*=1-s.dampingFactor,v.multiplyScalar(1-s.dampingFactor)):(f.set(0,0,0),v.set(0,0,0)),y=1,!(!(b||r.distanceToSquared(s.object.position)>h||8*(1-i.dot(s.object.quaternion))>h)||(s.dispatchEvent(c),r.copy(s.object.position),i.copy(s.object.quaternion),b=!1))}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",te,!1),s.domElement.removeEventListener("mousedown",Z,!1),s.domElement.removeEventListener("wheel",J,!1),s.domElement.removeEventListener("touchstart",Q,!1),s.domElement.removeEventListener("touchend",ee,!1),s.domElement.removeEventListener("touchmove",$,!1),document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",B,!1),window.removeEventListener("keydown",K,!1)};var s=this,c={type:"change"},l={type:"start"},u={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=p.NONE,h=1e-6,m=new ne.v,f=new ne.v,y=1,v=new ne.z,b=!1,g=new ne.y,x=new ne.y,w=new ne.y,T=new ne.y,M=new ne.y,P=new ne.y,E=new ne.y,k=new ne.y,A=new ne.y;function O(){return Math.pow(.95,s.zoomSpeed)}function _(e){f.theta-=e}function S(e){f.phi-=e}var R,L,D,N=(R=new ne.z,function(e,t){R.setFromMatrixColumn(t,0),R.multiplyScalar(-e),v.add(R)}),C=(L=new ne.z,function(e,t){!0===s.screenSpacePanning?L.setFromMatrixColumn(t,1):(L.setFromMatrixColumn(t,0),L.crossVectors(s.object.up,L)),L.multiplyScalar(e),v.add(L)}),j=(D=new ne.z,function(e,t){var n=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var a=s.object.position;D.copy(a).sub(s.target);var o=D.length();o*=Math.tan(s.object.fov/2*Math.PI/180),N(2*e*o/n.clientHeight,s.object.matrix),C(2*t*o/n.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(N(e*(s.object.right-s.object.left)/s.object.zoom/n.clientWidth,s.object.matrix),C(t*(s.object.top-s.object.bottom)/s.object.zoom/n.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)});function z(e){s.object.isPerspectiveCamera?y/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function H(e){s.object.isPerspectiveCamera?y*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function I(e){g.set(e.clientX,e.clientY)}function V(e){T.set(e.clientX,e.clientY)}function F(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,n)}}function Y(e){if(1==e.touches.length)T.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);T.set(t,n)}}function U(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);E.set(0,a)}function G(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,n)}w.subVectors(x,g).multiplyScalar(s.rotateSpeed);var a=s.domElement===document?s.domElement.body:s.domElement;_(2*Math.PI*w.x/a.clientHeight),S(2*Math.PI*w.y/a.clientHeight),g.copy(x)}function X(e){if(1==e.touches.length)M.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(t,n)}P.subVectors(M,T).multiplyScalar(s.panSpeed),j(P.x,P.y),T.copy(M)}function q(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+n*n);k.set(0,a),A.set(0,Math.pow(k.y/E.y,s.zoomSpeed)),z(A.y),E.copy(k)}function Z(e){if(console.log(!0),!1!==s.enabled){switch(e.preventDefault(),s.domElement.focus?s.domElement.focus():window.focus(),e.button){case 0:switch(s.mouseButtons.LEFT){case ne.k.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;V(e),d=p.PAN}else{if(!1===s.enableRotate)return;I(e),d=p.ROTATE}break;case ne.k.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enableRotate)return;I(e),d=p.ROTATE}else{if(!1===s.enablePan)return;V(e),d=p.PAN}break;default:d=p.NONE}break;case 1:switch(s.mouseButtons.MIDDLE){case ne.k.DOLLY:if(!1===s.enableZoom)return;!function(e){E.set(e.clientX,e.clientY)}(e),d=p.DOLLY;break;default:d=p.NONE}break;case 2:switch(s.mouseButtons.RIGHT){case ne.k.ROTATE:if(!1===s.enableRotate)return;I(e),d=p.ROTATE;break;case ne.k.PAN:if(!1===s.enablePan)return;V(e),d=p.PAN;break;default:d=p.NONE}}d!==p.NONE&&(document.addEventListener("mousemove",W,!1),document.addEventListener("mouseup",B,!1),s.dispatchEvent(l))}}function W(e){if(!1!==s.enabled)switch(e.preventDefault(),d){case p.ROTATE:if(!1===s.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,g).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;_(2*Math.PI*w.x/t.clientHeight),S(2*Math.PI*w.y/t.clientHeight),g.copy(x),s.update()}(e);break;case p.DOLLY:if(!1===s.enableZoom)return;!function(e){k.set(e.clientX,e.clientY),A.subVectors(k,E),0<A.y?z(O()):A.y<0&&H(O()),E.copy(k),s.update()}(e);break;case p.PAN:if(!1===s.enablePan)return;!function(e){M.set(e.clientX,e.clientY),P.subVectors(M,T).multiplyScalar(s.panSpeed),j(P.x,P.y),T.copy(M),s.update()}(e)}}function B(e){!1!==s.enabled&&(document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",B,!1),s.dispatchEvent(u),d=p.NONE)}function J(e){!1===s.enabled||!1===s.enableZoom||d!==p.NONE&&d!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(l),function(e){e.deltaY<0?H(O()):0<e.deltaY&&z(O()),s.update()}(e),s.dispatchEvent(u))}function K(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){var t=!1;switch(e.keyCode){case s.keys.UP:j(0,s.keyPanSpeed),t=!0;break;case s.keys.BOTTOM:j(0,-s.keyPanSpeed),t=!0;break;case s.keys.LEFT:j(s.keyPanSpeed,0),t=!0;break;case s.keys.RIGHT:j(-s.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),s.update())}(e)}function Q(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(s.touches.ONE){case ne.w.ROTATE:if(!1===s.enableRotate)return;F(e),d=p.TOUCH_ROTATE;break;case ne.w.PAN:if(!1===s.enablePan)return;Y(e),d=p.TOUCH_PAN;break;default:d=p.NONE}break;case 2:switch(s.touches.TWO){case ne.w.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&U(e),s.enablePan&&Y(e)}(e),d=p.TOUCH_DOLLY_PAN;break;case ne.w.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&U(e),s.enableRotate&&F(e)}(e),d=p.TOUCH_DOLLY_ROTATE;break;default:d=p.NONE}break;default:d=p.NONE}d!==p.NONE&&s.dispatchEvent(l)}}function $(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),d){case p.TOUCH_ROTATE:if(!1===s.enableRotate)return;G(e),s.update();break;case p.TOUCH_PAN:if(!1===s.enablePan)return;X(e),s.update();break;case p.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&q(e),s.enablePan&&X(e)}(e),s.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&q(e),s.enableRotate&&G(e)}(e),s.update();break;default:d=p.NONE}}function ee(e){!1!==s.enabled&&(s.dispatchEvent(u),d=p.NONE)}function te(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",te,!1),s.domElement.addEventListener("mousedown",Z,!1),s.domElement.addEventListener("wheel",J,!1),s.domElement.addEventListener("touchstart",Q,!1),s.domElement.addEventListener("touchend",ee,!1),s.domElement.addEventListener("touchmove",$,!1),window.addEventListener("keydown",K,!1),this.update()}var ne=n("Womt");(l.prototype=Object.create(ne.e.prototype)).constructor=l;function a(e,t){l.call(this,e,t),this.mouseButtons.LEFT=ne.k.PAN,this.mouseButtons.RIGHT=ne.k.ROTATE,this.touches.ONE=ne.w.PAN,this.touches.TWO=ne.w.DOLLY_ROTATE}(a.prototype=Object.create(ne.e.prototype)).constructor=a;function c(e){ne.j.call(this,e)}var F,Y,U,G,X,q,Z,W,B,J,K,Q,$,ee,te,ae,oe;c.prototype=Object.assign(Object.create(ne.j.prototype),{constructor:c,load:function(e,t,n,a){var o=this,r=new ne.f(o.manager);r.setPath(o.path),r.load(e,function(e){t(o.parse(e))},n,a)},parse:function(e){function g(e,t,n,a,o,r,i,s){a=a*Math.PI/180,t=Math.abs(t),n=Math.abs(n);var c=(i.x-s.x)/2,l=(i.y-s.y)/2,u=Math.cos(a)*c+Math.sin(a)*l,p=-Math.sin(a)*c+Math.cos(a)*l,d=t*t,h=n*n,m=u*u,f=p*p,y=m/d+f/h;if(1<y){var v=Math.sqrt(y);d=(t*=v)*t,h=(n*=v)*n}var b=d*f+h*m,g=(d*h-b)/b,x=Math.sqrt(Math.max(0,g));o===r&&(x=-x);var w=x*t*p/n,T=-x*n*u/t,M=Math.cos(a)*w-Math.sin(a)*T+(i.x+s.x)/2,P=Math.sin(a)*w+Math.cos(a)*T+(i.y+s.y)/2,E=A(1,0,(u-w)/t,(p-T)/n),k=A((u-w)/t,(p-T)/n,(-u-w)/t,(-p-T)/n)%(2*Math.PI);e.currentPath.absellipse(M,P,t,n,E,E+k,0===r,a)}function A(e,t,n,a){var o=e*n+t*a,r=Math.sqrt(e*e+t*t)*Math.sqrt(n*n+a*a),i=Math.acos(Math.max(-1,Math.min(1,o/r)));return e*a-t*n<0&&(i=-i),i}function s(a,o){function e(e,t,n){void 0===n&&(n=function(e){return e}),a.hasAttribute(e)&&(o[t]=n(a.getAttribute(e))),""!==a.style[e]&&(o[t]=n(a.style[e]))}function t(e){return Math.max(0,Math.min(1,e))}function n(e){return Math.max(0,e)}return o=Object.assign({},o),e("fill","fill"),e("fill-opacity","fillOpacity",t),e("stroke","stroke"),e("stroke-opacity","strokeOpacity",t),e("stroke-width","strokeWidth",n),e("stroke-linejoin","strokeLineJoin"),e("stroke-linecap","strokeLineCap"),e("stroke-miterlimit","strokeMiterLimit",n),o}function x(e,t){return e-(t-e)}function w(e){for(var t=e.split(/[\s,]+|(?=\s?[+\-])/),n=0;n<t.length;n++){var a=t[n];if(a.indexOf(".")!==a.lastIndexOf("."))for(var o=a.split("."),r=2;r<o.length;r++)t.splice(n+r-1,0,"0."+o[r]);t[n]=parseFloat(a)}return t}console.log("THREE.SVGLoader");var c=[],l=[],v=new ne.l,b=new ne.l,T=new ne.l,M=new ne.l,d=new ne.y,h=new ne.z,u=new ne.l;console.time("THREE.SVGLoader: DOMParser");var t=(new DOMParser).parseFromString(e,"image/svg+xml");console.timeEnd("THREE.SVGLoader: DOMParser"),console.time("THREE.SVGLoader: Parse"),function e(t,n){if(1===t.nodeType){var a=function(e){if(!e.hasAttribute("transform"))return null;var t=function(e){for(var t=new ne.l,n=v,a=e.getAttribute("transform").split(")"),o=a.length-1;0<=o;o--){var r=a[o].trim();if(""!==r){var i=r.indexOf("("),s=r.length;if(0<i&&i<s){var c=r.substr(0,i),l=w(r.substr(i+1,s-i-1));switch(n.identity(),c){case"translate":if(1<=l.length){var u=l[0],p=u;2<=l.length&&(p=l[1]),n.translate(u,p)}break;case"rotate":if(1<=l.length){var d,h=0,m=0;d=-l[0]*Math.PI/180,3<=l.length&&(h=l[1],m=l[2]),b.identity().translate(-h,-m),T.identity().rotate(d),M.multiplyMatrices(T,b),b.identity().translate(h,m),n.multiplyMatrices(b,M)}break;case"scale":if(1<=l.length){var f=l[0],y=f;2<=l.length&&(y=l[1]),n.scale(f,y)}break;case"skewX":1===l.length&&n.set(1,Math.tan(l[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===l.length&&n.set(1,0,0,Math.tan(l[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===l.length&&n.set(l[0],l[2],l[4],l[1],l[3],l[5],0,0,1)}}t.premultiply(n)}}return t}(e);return 0<l.length&&t.premultiply(l[l.length-1]),u.copy(t),l.push(t),t}(t),o=null;switch(t.nodeName){case"svg":break;case"g":n=s(t,n);break;case"path":n=s(t,n),t.hasAttribute("d")&&(o=function(e){for(var t=new ne.u,n=new ne.y,a=new ne.y,o=new ne.y,r=!0,i=!1,s=e.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi),c=0,l=s.length;c<l;c++){var u=s[c],p=u.charAt(0),d=u.substr(1).trim();switch(!0===r&&(r=!(i=!0)),p){case"M":for(var h=w(d),m=0,f=h.length;m<f;m+=2)n.x=h[m+0],n.y=h[m+1],a.x=n.x,a.y=n.y,0===m?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y),0===m&&!0===i&&o.copy(n);break;case"H":for(h=w(d),m=0,f=h.length;m<f;m++)n.x=h[m],a.x=n.x,a.y=n.y,t.lineTo(n.x,n.y),0===m&&!0===i&&o.copy(n);break;case"V":for(h=w(d),m=0,f=h.length;m<f;m++)n.y=h[m],a.x=n.x,a.y=n.y,t.lineTo(n.x,n.y),0===m&&!0===i&&o.copy(n);break;case"L":for(h=w(d),m=0,f=h.length;m<f;m+=2)n.x=h[m+0],n.y=h[m+1],a.x=n.x,a.y=n.y,t.lineTo(n.x,n.y),0===m&&!0===i&&o.copy(n);break;case"C":for(h=w(d),m=0,f=h.length;m<f;m+=6)t.bezierCurveTo(h[m+0],h[m+1],h[m+2],h[m+3],h[m+4],h[m+5]),a.x=h[m+2],a.y=h[m+3],n.x=h[m+4],n.y=h[m+5],0===m&&!0===i&&o.copy(n);break;case"S":for(h=w(d),m=0,f=h.length;m<f;m+=4)t.bezierCurveTo(x(n.x,a.x),x(n.y,a.y),h[m+0],h[m+1],h[m+2],h[m+3]),a.x=h[m+0],a.y=h[m+1],n.x=h[m+2],n.y=h[m+3],0===m&&!0===i&&o.copy(n);break;case"Q":for(h=w(d),m=0,f=h.length;m<f;m+=4)t.quadraticCurveTo(h[m+0],h[m+1],h[m+2],h[m+3]),a.x=h[m+0],a.y=h[m+1],n.x=h[m+2],n.y=h[m+3],0===m&&!0===i&&o.copy(n);break;case"T":for(h=w(d),m=0,f=h.length;m<f;m+=2){var y=x(n.x,a.x),v=x(n.y,a.y);t.quadraticCurveTo(y,v,h[m+0],h[m+1]),a.x=y,a.y=v,n.x=h[m+0],n.y=h[m+1],0===m&&!0===i&&o.copy(n)}break;case"A":for(h=w(d),m=0,f=h.length;m<f;m+=7){var b=n.clone();n.x=h[m+5],n.y=h[m+6],a.x=n.x,a.y=n.y,g(t,h[m],h[m+1],h[m+2],h[m+3],h[m+4],b,n),0===m&&!0===i&&o.copy(n)}break;case"m":for(h=w(d),m=0,f=h.length;m<f;m+=2)n.x+=h[m+0],n.y+=h[m+1],a.x=n.x,a.y=n.y,0===m?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y),0===m&&!0===i&&o.copy(n);break;case"h":for(h=w(d),m=0,f=h.length;m<f;m++)n.x+=h[m],a.x=n.x,a.y=n.y,t.lineTo(n.x,n.y),0===m&&!0===i&&o.copy(n);break;case"v":for(h=w(d),m=0,f=h.length;m<f;m++)n.y+=h[m],a.x=n.x,a.y=n.y,t.lineTo(n.x,n.y),0===m&&!0===i&&o.copy(n);break;case"l":for(h=w(d),m=0,f=h.length;m<f;m+=2)n.x+=h[m+0],n.y+=h[m+1],a.x=n.x,a.y=n.y,t.lineTo(n.x,n.y),0===m&&!0===i&&o.copy(n);break;case"c":for(h=w(d),m=0,f=h.length;m<f;m+=6)t.bezierCurveTo(n.x+h[m+0],n.y+h[m+1],n.x+h[m+2],n.y+h[m+3],n.x+h[m+4],n.y+h[m+5]),a.x=n.x+h[m+2],a.y=n.y+h[m+3],n.x+=h[m+4],n.y+=h[m+5],0===m&&!0===i&&o.copy(n);break;case"s":for(h=w(d),m=0,f=h.length;m<f;m+=4)t.bezierCurveTo(x(n.x,a.x),x(n.y,a.y),n.x+h[m+0],n.y+h[m+1],n.x+h[m+2],n.y+h[m+3]),a.x=n.x+h[m+0],a.y=n.y+h[m+1],n.x+=h[m+2],n.y+=h[m+3],0===m&&!0===i&&o.copy(n);break;case"q":for(h=w(d),m=0,f=h.length;m<f;m+=4)t.quadraticCurveTo(n.x+h[m+0],n.y+h[m+1],n.x+h[m+2],n.y+h[m+3]),a.x=n.x+h[m+0],a.y=n.y+h[m+1],n.x+=h[m+2],n.y+=h[m+3],0===m&&!0===i&&o.copy(n);break;case"t":for(h=w(d),m=0,f=h.length;m<f;m+=2)y=x(n.x,a.x),v=x(n.y,a.y),t.quadraticCurveTo(y,v,n.x+h[m+0],n.y+h[m+1]),a.x=y,a.y=v,n.x=n.x+h[m+0],n.y=n.y+h[m+1],0===m&&!0===i&&o.copy(n);break;case"a":for(h=w(d),m=0,f=h.length;m<f;m+=7)b=n.clone(),n.x+=h[m+5],n.y+=h[m+6],a.x=n.x,a.y=n.y,g(t,h[m],h[m+1],h[m+2],h[m+3],h[m+4],b,n),0===m&&!0===i&&o.copy(n);break;case"Z":case"z":t.currentPath.autoClose=!0,0<t.currentPath.curves.length&&(n.copy(o),t.currentPath.currentPoint.copy(n),r=!0);break;default:console.warn(u)}i=!1}return t}(t));break;case"rect":n=s(t,n),o=function(e){var t=parseFloat(e.getAttribute("x")||0),n=parseFloat(e.getAttribute("y")||0),a=parseFloat(e.getAttribute("rx")||0),o=parseFloat(e.getAttribute("ry")||0),r=parseFloat(e.getAttribute("width")),i=parseFloat(e.getAttribute("height")),s=new ne.u;return s.moveTo(t+2*a,n),s.lineTo(t+r-2*a,n),0===a&&0===o||s.bezierCurveTo(t+r,n,t+r,n,t+r,n+2*o),s.lineTo(t+r,n+i-2*o),0===a&&0===o||s.bezierCurveTo(t+r,n+i,t+r,n+i,t+r-2*a,n+i),s.lineTo(t+2*a,n+i),0===a&&0===o||s.bezierCurveTo(t,n+i,t,n+i,t,n+i-2*o),s.lineTo(t,n+2*o),0===a&&0===o||s.bezierCurveTo(t,n,t,n,t+2*a,n),s}(t);break;case"polygon":n=s(t,n),o=function(e){var r=new ne.u,i=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(e,t,n){var a=parseFloat(t),o=parseFloat(n);0===i?r.moveTo(a,o):r.lineTo(a,o),i++}),r.currentPath.autoClose=!0,r}(t);break;case"polyline":n=s(t,n),o=function(e){var r=new ne.u,i=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(e,t,n){var a=parseFloat(t),o=parseFloat(n);0===i?r.moveTo(a,o):r.lineTo(a,o),i++}),r.currentPath.autoClose=!1,r}(t);break;case"circle":n=s(t,n),o=function(e){var t=parseFloat(e.getAttribute("cx")),n=parseFloat(e.getAttribute("cy")),a=parseFloat(e.getAttribute("r")),o=new ne.o;o.absarc(t,n,a,0,2*Math.PI);var r=new ne.u;return r.subPaths.push(o),r}(t);break;case"ellipse":n=s(t,n),o=function(e){var t=parseFloat(e.getAttribute("cx")),n=parseFloat(e.getAttribute("cy")),a=parseFloat(e.getAttribute("rx")),o=parseFloat(e.getAttribute("ry")),r=new ne.o;r.absellipse(t,n,a,o,0,2*Math.PI);var i=new ne.u;return i.subPaths.push(r),i}(t);break;case"line":n=s(t,n),o=function(e){var t=parseFloat(e.getAttribute("x1")),n=parseFloat(e.getAttribute("y1")),a=parseFloat(e.getAttribute("x2")),o=parseFloat(e.getAttribute("y2")),r=new ne.u;return r.moveTo(t,n),r.lineTo(a,o),r.currentPath.autoClose=!1,r}(t);break;default:console.log(t)}o&&(void 0!==n.fill&&"none"!==n.fill&&o.color.setStyle(n.fill),function(e,t){function n(e){h.set(e.x,e.y,1).applyMatrix3(t),e.set(h.x,h.y)}for(var a=function(e){return 0!==e.elements[1]||0!==e.elements[3]}(t),o=e.subPaths,r=0,i=o.length;r<i;r++)for(var s=o[r].curves,c=0;c<s.length;c++){var l=s[c];l.isLineCurve?(n(l.v1),n(l.v2)):l.isCubicBezierCurve?(n(l.v0),n(l.v1),n(l.v2),n(l.v3)):l.isQuadraticBezierCurve?(n(l.v0),n(l.v1),n(l.v2)):l.isEllipseCurve&&(a&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),d.set(l.aX,l.aY),n(d),l.aX=d.x,l.aY=d.y,l.xRadius*=(p=t.elements,Math.sqrt(p[0]*p[0]+p[1]*p[1])),l.yRadius*=(u=t.elements,Math.sqrt(u[3]*u[3]+u[4]*u[4])))}var u,p}(o,u),c.push(o),o.userData={node:t,style:n});for(var r=t.childNodes,i=0;i<r.length;i++)e(r[i],n);a&&(l.pop(),0<l.length?u.copy(l[l.length-1]):u.identity())}}(t.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});var n={paths:c,xml:t.documentElement};return console.timeEnd("THREE.SVGLoader: Parse"),n}}),c.getStrokeStyle=function(e,t,n,a,o){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:a=void 0!==a?a:"butt",strokeMiterLimit:o=void 0!==o?o:4}},c.pointsToStroke=function(e,t,n,a){var o=[],r=[],i=[];if(0===c.pointsToStrokeWithBuffers(e,t,n,a,o,r,i))return null;var s=new ne.a;return s.addAttribute("position",new ne.g(o,3)),s.addAttribute("normal",new ne.g(r,3)),s.addAttribute("uv",new ne.g(i,2)),s},c.pointsToStrokeWithBuffers=(F=new ne.y,Y=new ne.y,U=new ne.y,G=new ne.y,X=new ne.y,q=new ne.y,Z=new ne.y,W=new ne.y,B=new ne.y,J=new ne.y,K=new ne.y,Q=new ne.y,$=new ne.y,ee=new ne.y,te=new ne.y,ae=new ne.y,oe=new ne.y,function(e,s,l,r,c,a,o,t){l=void 0!==l?l:12,r=void 0!==r?r:.001,t=void 0!==t?t:0;var n=(e=function(e){for(var t=!1,n=1,a=e.length-1;n<a;n++)if(e[n].distanceTo(e[n+1])<r){t=!0;break}if(!t)return e;var o=[];for(o.push(e[0]),n=1,a=e.length-1;n<a;n++)e[n].distanceTo(e[n+1])>=r&&o.push(e[n]);return o.push(e[e.length-1]),o}(e)).length;if(n<2)return 0;var i,u,p,d,h,m=e[0].equals(e[n-1]),f=e[0],y=s.strokeWidth/2,v=1/(n-1),b=0,g=!1,x=0,w=3*t,T=2*t;N(e[0],e[1],F).multiplyScalar(y),W.copy(e[0]).sub(F),B.copy(e[0]).add(F),J.copy(W),K.copy(B);for(var M=1;M<n;M++){i=e[M],u=M===n-1?m?e[1]:void 0:e[M+1];var P=F;N(f,i,P),U.copy(P).multiplyScalar(y),Q.copy(i).sub(U),$.copy(i).add(U);var E=b+v;if(p=!1,void 0!==u){N(i,u,Y),U.copy(Y).multiplyScalar(y),ee.copy(i).sub(U),te.copy(i).add(U),d=!0,U.subVectors(u,f),P.dot(U)<0&&(d=!1),1===M&&(g=d),U.subVectors(u,i),U.normalize();var k=Math.abs(P.dot(U));if(0!==k){var A=y/k;U.multiplyScalar(-A),G.subVectors(i,f),X.copy(G).setLength(A).add(U),ae.copy(X).negate();var O=X.length(),_=G.length();G.divideScalar(_),q.subVectors(u,i);var S=q.length();switch(q.divideScalar(S),G.dot(ae)<_&&q.dot(ae)<S&&(p=!0),oe.copy(X).add(i),ae.add(i),h=!1,p?d?(te.copy(ae),$.copy(ae)):(ee.copy(ae),Q.copy(ae)):z(),s.strokeLineJoin){case"bevel":H(d,p,E);break;case"round":I(d,p),d?j(i,Q,ee,E,0):j(i,te,$,E,1);break;case"miter":case"miter-clip":default:var R=y*s.strokeMiterLimit/O;if(R<1){if("miter-clip"!==s.strokeLineJoin){H(d,p,E);break}I(d,p),d?(q.subVectors(oe,Q).multiplyScalar(R).add(Q),Z.subVectors(oe,ee).multiplyScalar(R).add(ee),C(Q,E,0),C(q,E,0),C(i,E,.5),C(i,E,.5),C(q,E,0),C(Z,E,0),C(i,E,.5),C(Z,E,0),C(ee,E,0)):(q.subVectors(oe,$).multiplyScalar(R).add($),Z.subVectors(oe,te).multiplyScalar(R).add(te),C($,E,1),C(q,E,1),C(i,E,.5),C(i,E,.5),C(q,E,1),C(Z,E,1),C(i,E,.5),C(Z,E,1),C(te,E,1))}else p?(d?(C(B,b,1),C(W,b,0),C(oe,E,0),C(B,b,1),C(oe,E,0),C(ae,E,1)):(C(B,b,1),C(W,b,0),C(oe,E,1),C(W,b,0),C(ae,E,0),C(oe,E,1)),d?ee.copy(oe):te.copy(oe)):d?(C(Q,E,0),C(oe,E,0),C(i,E,.5),C(i,E,.5),C(oe,E,0),C(ee,E,0)):(C($,E,1),C(oe,E,1),C(i,E,.5),C(i,E,.5),C(oe,E,1),C(te,E,1)),h=!0}}else z()}else z();m||M!==n-1||V(e[0],J,K,d,!0,b),b=E,f=i,W.copy(ee),B.copy(te)}if(m){if(p&&c){var L=oe,D=ae;g!==d&&(L=ae,D=oe),d?(D.toArray(c,0),D.toArray(c,9),h&&L.toArray(c,3)):(D.toArray(c,3),D.toArray(c,9),h&&L.toArray(c,0))}}else V(i,Q,$,d,!1,E);return x;function N(e,t,n){return n.subVectors(t,e),n.set(-n.y,n.x).normalize()}function C(e,t,n){c&&(c[w]=e.x,c[w+1]=e.y,c[w+2]=0,a&&(a[w]=0,a[w+1]=0,a[w+2]=1),w+=3,o&&(o[T]=t,o[T+1]=n,T+=2)),x+=3}function j(e,t,n,a,o){F.copy(t).sub(e).normalize(),Y.copy(n).sub(e).normalize();var r=Math.PI,i=F.dot(Y);Math.abs(i)<1&&(r=Math.abs(Math.acos(i))),r/=l,U.copy(t);for(var s=0,c=l-1;s<c;s++)G.copy(U).rotateAround(e,r),C(U,a,o),C(G,a,o),C(e,a,.5),U.copy(G);C(G,a,o),C(n,a,o),C(e,a,.5)}function z(){C(B,b,1),C(W,b,0),C(Q,E,0),C(B,b,1),C(Q,E,1),C($,E,0)}function H(e,t,n){t?(e?(C(B,b,1),C(W,b,0),C(Q,E,0),C(B,b,1),C(Q,E,0),C(ae,E,1),C(Q,n,0),C(ee,n,0)):(C(B,b,1),C(W,b,0),C($,E,1),C(W,b,0),C(ae,E,0),C($,E,1),C($,n,1),C(te,n,0)),C(ae,n,.5)):(e?(C(Q,n,0),C(ee,n,0)):(C($,n,1),C(te,n,0)),C(i,n,.5))}function I(e,t){t&&(e?(C(B,b,1),C(W,b,0),C(Q,E,0),C(B,b,1),C(Q,E,0),C(ae,E,1),C(Q,b,0),C(i,E,.5),C(ae,E,1),C(i,E,.5),C(ee,b,0),C(ae,E,1)):(C(B,b,1),C(W,b,0),C($,E,1),C(W,b,0),C(ae,E,0),C($,E,1),C($,b,1),C(ae,E,0),C(i,E,.5),C(i,E,.5),C(ae,E,0),C(te,b,1)))}function V(e,t,n,a,o,r){switch(s.strokeLineCap){case"round":o?j(e,n,t,r,.5):j(e,t,n,r,.5);break;case"square":if(o)F.subVectors(t,e),Y.set(F.y,-F.x),U.addVectors(F,Y).add(e),G.subVectors(Y,F).add(e),a?(U.toArray(c,3),G.toArray(c,0),G.toArray(c,9)):(U.toArray(c,3),U.toArray(c,9),G.toArray(c,0));else{F.subVectors(n,e),Y.set(F.y,-F.x),U.addVectors(F,Y).add(e),G.subVectors(Y,F).add(e);var i=c.length;a?(U.toArray(c,i-3),G.toArray(c,i-6)):(U.toArray(c,i-6),G.toArray(c,i-3)),G.toArray(c,i-12)}}}});var u=c,o=n("yVZF"),p=n.n(o);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){function c(){var o,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c);var t=new ne.a;t.addAttribute("vertexPos",new ne.g([1,1,0,-1,1,0,1,-1,0,-1,-1,0],3)),t.setIndex([0,1,2,1,3,2]);var n=new ne.x,a=n.load("assets/earth/earth-day.jpg"),r=n.load("assets/earth/earth-aux.jpg"),i=n.load("assets/earth/earth-nrm.jpg");a.wrapS=ne.s,r.wrapS=ne.s,i.wrapS=ne.s;var s=new ne.r({uniforms:{lDir:{value:new ne.z},invViewMatrix:{value:new ne.m},scale:{value:e},dayTex:{type:"t",value:a},auxTex:{type:"t",value:r},nrmTex:{type:"t",value:i}},vertexShader:"precision highp float;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 invViewMatrix;\n\nuniform vec3 cameraPosition;\n\nuniform float scale;\n\nattribute vec3 vertexPos;\nvarying vec3 fragPos;\n\n// sPos : position of sphere in 2D, where the Y should be perpendicular to camera plane\n// s    : sign for either min or max of sphere on X axis of sPos\n// returns additional correction on X axis due to projection\nfloat perspectiveCorrect(vec2 sPos, float s) {\n    float l = sqrt(pow(sPos.y, 2.0) + pow(sPos.x, 2.0));\n    float a = asin(sPos.x / l);\n    float b = asin(scale / l) * s;\n    return ((scale / cos(a + b)) - scale) * s;\n}\n\nvoid main() {\n    /* \n       first we multiply the matrices together for positioning\n       then set rotation part to identity for a billboard effect\n       (where the render plane is always parallel with the near plane)\n    */\n    mat4 modelViewMatrix = viewMatrix * modelMatrix;\n\n    // first column\n    modelViewMatrix[0][0] = scale; \n    modelViewMatrix[0][1] = 0.0; \n    modelViewMatrix[0][2] = 0.0; \n\n    // second column\n    modelViewMatrix[1][0] = 0.0; \n    modelViewMatrix[1][1] = scale; \n    modelViewMatrix[1][2] = 0.0; \n\n    // third column\n    modelViewMatrix[2][0] = 0.0; \n    modelViewMatrix[2][1] = 0.0; \n    modelViewMatrix[2][2] = scale; \n\n    // position of render plane vertex relative to camera\n    vec4 viewPos = modelViewMatrix * vec4(vertexPos, 1);\n\n    // position of sphere center relative to camera\n    vec4 spherePos = viewMatrix * modelMatrix[3];\n\n    // extend plane sides for complete render of sphere\n    viewPos.x += perspectiveCorrect(spherePos.xz, vertexPos.x);\n    viewPos.y += perspectiveCorrect(spherePos.yz, vertexPos.y);\n\n    // forward world pos of vertex to fragment shader\n    fragPos = (invViewMatrix * viewPos).xyz;\n\n    // corner positions of plane\n    gl_Position = projectionMatrix * viewPos;\n}\n",fragmentShader:"precision highp float;\n#extension GL_OES_standard_derivatives : enable\n\n#define LIGHT_DIR normalize(vec3(1, 0.3, 1))\n#define PI 3.14159265359\n#define MAX 10000\n\n\n// scatter const\n#define RATIO 0.99\n#define RED_OUT 1.0 // TODO: remove\n\n#define ATMOS_REACH .005\n#define ATMOS_SCALE 40.0\n#define SHINE_THROUGH 0.88\n\n#define NUM_OUT_SCATTER 1.0\n#define NUM_IN_SCATTER 4.0\n\n#define PH_RAY 0.8\n#define PH_MIE 0.05\n\n\n\nuniform vec3 cameraPosition;\nuniform float scale;\nuniform mat4 invViewMatrix;\nuniform mat4 modelMatrix;\nuniform vec3 lDir;\n\n\nuniform sampler2D dayTex;\nuniform sampler2D nrmTex;\nuniform sampler2D auxTex;\n\nvarying vec3 fragPos;\n\nvec2 Sphere(vec3 origin, vec3 ray, float radius);\nvec3 MapUV(vec3 normal, vec3 ray, vec3 lightDir);\nvec3 in_scatter( vec3 o, vec3 dir, vec2 e, vec3 l, float inner, float outer );\n\nvoid main() {\n    float inner = scale * RATIO;\n    float outer = scale;\n\n    vec3 color = vec3(0);\n    \n    // out of screen ray\n    vec3 ray = normalize(cameraPosition - fragPos);\n\n    // atmosphere raycast\n    vec2 outerSphereHits = Sphere(cameraPosition, ray, outer);\n    if (outerSphereHits.x > outerSphereHits.y) {\n        gl_FragColor = vec4(0);\n        return;\n    }\n\n    // planet raycast\n    vec2 innerSphereHits = Sphere(cameraPosition, ray, inner);\n    if (innerSphereHits.x < innerSphereHits.y) {\n        // calculate world normal\n        vec3 worldPos = (ray * innerSphereHits.x);\n        vec3 normalDir = normalize(cameraPosition - worldPos);\n\n        // final earth texture\n        color = MapUV(normalDir, ray, lDir);\n    }\n\n    outerSphereHits.y = min(outerSphereHits.y, innerSphereHits.x);\n\n    vec3 I = in_scatter( cameraPosition, ray, -outerSphereHits.yx, lDir, inner, outer);\n\n    color += pow(I, vec3(1.2));\n\n    // color *= atmosL;\n\n    gl_FragColor = vec4(color, 1);\n}\n\n// ray intersects sphere\n// e = -b +/- sqrt( b^2 - c )\nvec2 Sphere(vec3 origin, vec3 ray, float radius) {\n\tfloat b = dot(origin, ray);\n\tfloat c = dot(origin, origin) - radius * radius;\n\t\n\tfloat d = b * b - c;\n\tif (d < 0.0) {\n\t\treturn vec2(MAX, -MAX);\n\t}\n\n\td = sqrt(d);\n\treturn vec2(b-d, b+d);\n}\n\n\nvec3 MapUV(vec3 normalDir, vec3 ray, vec3 lightDir) {\n    // https://forum.unity.com/threads/what-is-this-mipmap-artifact.657052/\n    float t = atan(normalDir.x, normalDir.z) / (2.0 * PI);\n\n    float t_a = t + 0.5;\n    float t_b = fract(t + 1.0) - 0.5;\n    \n    vec2 uv = vec2(\n        fwidth(t_a) < fwidth(t_b) ? t_a : t_b,\n        0.5 - asin(-normalDir.y) / PI\n    );\n\n    // texture mapping\n    vec3 dayMap = texture2D(dayTex, uv).rgb;\n    vec3 normalMap = texture2D(nrmTex, uv).rgb * 2.0 - 1.0;\n    vec3 auxMap = texture2D(auxTex, uv).rgb;\n    \n    float lit = auxMap.r;\n    float specular = auxMap.g;\n    float cloud = auxMap.b;\n\n\n    // reflection of water\n    vec3 reflectDir = reflect(-lightDir, normalDir);\n    float reflectAmount = pow(max(dot(ray, reflectDir), 0.0), 15.0) * specular;\n\n    \n\n    // clouds\n    dayMap = mix(dayMap, vec3(1), vec3(cloud * 1.1));\n\n    // normal mapPIng\n    vec3 npole = (modelMatrix * vec4(0, 1, 0, 0)).xyz;\n    vec3 tangent = -cross(normalDir, npole);\n    vec3 biTangent = -cross(tangent, normalDir);\n    mat3 tbn = mat3(tangent, biTangent, normalDir);\n\n    vec3 normalMapDir = tbn * normalMap;\n\n    // lighting of earth\n    float shadow = max(0.01, dot(normalMapDir, lightDir));\n    dayMap *= shadow;\n\n    dayMap += lit * pow((1.0 - max(0., dot(lightDir, normalDir) + 0.2)), 5.0);\n\n    dayMap = mix(dayMap, vec3(1), reflectAmount / 2.0);\n\n    return dayMap;\n}\n\n\n\n// // math const\n// const float MAX = 10000.0;\n\n\n\n// Mie\n// g : ( -0.75, -0.999 )\n//      3 * ( 1 - g^2 )               1 + c^2\n// F = ----------------- * -------------------------------\n//      8PI * ( 2 + g^2 )     ( 1 + g^2 - 2 * g * c )^(3/2)\nfloat phase_mie( float g, float c, float cc ) {\n\tfloat gg = g * g;\n\t\n\tfloat a = ( 1.0 - gg ) * ( 1.0 + cc );\n\n\tfloat b = 1.0 + gg - 2.0 * g * c;\n\tb *= sqrt( b );\n\tb *= 2.0 + gg;\t\n\t\n\treturn ( 3.0 / 8.0 / PI ) * a / b;\n}\n\n// Rayleigh\n// g : 0\n// F = 3/16PI * ( 1 + c^2 )\nfloat phase_ray( float cc ) {\n\treturn ( 3.0 / 16.0 / PI ) * ( 1.0 + cc );\n}\n\n\n\nfloat density( vec3 p, float ph, float d ) {\n\treturn exp( -max( length( p ) - d, 0.0 ) / (ph * ATMOS_REACH) );\n}\n\nfloat optic( vec3 p, vec3 q, float ph, float d ) {\n\tvec3 s = ( q - p ) / NUM_OUT_SCATTER;\n\tvec3 v = p + s * 0.2;\n\t\n\tfloat sum = 0.0;\n\tfor ( float i = 0.0; i < NUM_OUT_SCATTER; i++ ) {\n\t\tsum += density( v, ph, d );\n\t\tv += s;\n\t}\n\tsum *= length( s );\n\t\n\treturn sum;\n}\n\n\nvec3 in_scatter( vec3 o, vec3 dir, vec2 e, vec3 l, float inner, float outer ) {\n\tconst float ph_ray = PH_RAY;\n    const float ph_mie = PH_MIE;\n    \n    const vec3 k_ray = vec3( 7.8, 10.5, 17.1 ) * .5;\n    const vec3 k_mie = vec3( 27 );\n    float k_mie_ex = -0.05 * max(-0.2, min(1.0, .5 + dot( dir, -l ) * 3.0));\n    \n\tvec3 sum_ray = vec3( 0.0 );\n    vec3 sum_mie = vec3( 0.0 );\n    \n    float n_ray0 = 0.0;\n    float n_mie0 = 0.0;\n    \n\tfloat len = ( e.y - e.x ) / float( NUM_IN_SCATTER );\n    vec3 s = -dir * len;\n\tvec3 v = -o + -dir * ( e.x + len * 0.5 );\n    \n\n    float test = min(abs(e.x - e.y) * 2.0, 1.0);\n\n    for ( float i = 0.0; i < NUM_IN_SCATTER; i++ ) {   \n\t\tfloat d_ray = density( v, ph_ray, inner ) * len * 5.0;\n        float d_mie = density( v, ph_mie, inner ) * len;\n        \n        n_ray0 += d_ray;\n        n_mie0 += d_mie;\n\n        vec2 f = Sphere( v, l, outer * RED_OUT ) * 1.5;\n\t\tvec3 u = v - l * f.y;\n        \n        float n_ray1 = optic( v, u, ph_ray, inner );\n        float n_mie1 = optic( v, u, ph_mie, inner );\n\t\t\n        vec3 att = exp( - ( n_ray0 + n_ray1 ) * k_ray - ( n_mie0 + n_mie1 ) * k_mie * k_mie_ex );\n        \n\t\tsum_ray += d_ray * att;\n        sum_mie += d_mie * att;\n\n        v += s; // HACK\n\n        if (i >= test * NUM_IN_SCATTER) {\n            break;\n        }\n\t}\n\t\n\tfloat c  = dot( dir, -l );\n\tfloat cc = c * c;\n    vec3 scatter =\n        sum_ray * k_ray * phase_ray( cc / 1000. ) +\n     \tsum_mie * k_mie * phase_mie(SHINE_THROUGH, c, cc );\n    \n\t\n\treturn ATMOS_SCALE * scatter;\n}\n"});return f(m(o=function(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?m(e):t}(this,h(c).call(this,t,s))),"SetSun",function(e){var t=p.a.getPosition(e,90,0),n=(new ne.q).setFromEuler(new ne.d(-t.altitude,-t.azimuth,0)),a=new ne.z(0,0,1).applyQuaternion(n);o.material.uniforms.lDir.value=a}),f(m(o),"LoadBorders",function(e,t){for(var n=t.xml.width.animVal.value,a=t.xml.height.animVal.value,o=new ne.h,r=new ne.r({vertexShader:"precision highp float;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nattribute vec3 position;\n\n#define DEG2RAD 0.0174533\n#define PI 3.14159265359\n\nvoid main() {\n    gl_Position = projectionMatrix * viewMatrix * vec4(position, 1);\n}\n",fragmentShader:"precision highp float;\n\nvoid main() {\n    gl_FragColor = vec4(1);\n}\n"}),i=0;i<t.paths.length;i++){for(var s=t.paths[i],c=[],l=0;l<s.subPaths.length;l++)for(var u=s.subPaths[l].getPoints(),p=0;p<u.length;p++){var d=u[p],h=Math.PI-(d.x/n-.5)*Math.PI*2-Math.PI/2,m=-(d.y/a-.5)*Math.PI*.962-.055;c.push(Math.cos(m)*Math.cos(h)/2.005,Math.sin(m)/2.005,Math.cos(m)*Math.sin(h)/2.005)}var f=(new ne.a).addAttribute("position",new ne.g(c,3)),y=new ne.i(f,r);y.frustumCulled=!1,o.add(y)}e.add(o)}),o.onBeforeRender=function(e,t,n,a,o){o.uniforms.invViewMatrix.value=n.matrixWorld},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(c,ne["n"]),c}();function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"loop",function(e){e.controls.update(),e.renderer.render(e.scene,e.camera),requestAnimationFrame(n.loop.bind(null,e))}),v(this,"onWindowResize",function(e,t){var n=t.domElement,a=n.clientWidth,o=n.clientHeight;e.aspect=a/o,e.updateProjectionMatrix(),t.setPixelRatio(window.devicePixelRatio),t.setSize(n.clientWidth,n.clientHeight,!1)});var a=new ne.t,o=new ne.p(20,window.innerWidth/window.innerHeight,.1,1e3);o.position.set(0,0,3);var r=new ne.A({canvas:t});r.setClearColor(new ne.c("black")),window.addEventListener("resize",this.onWindowResize.bind(null,o,r),!1),window.dispatchEvent(new Event("resize"));var i=new y(.5);i.SetSun(Date.now()),a.add(i);var s=new l(o);s.enableDamping=!0,s.dampingFactor=.05,s.minDistance=2,s.maxDistance=10,s.enablePan=!1;var c=new ne.b(!0);this.loop({scene:a,clock:c,controls:s,renderer:r,camera:o}),(new u).load("/assets/map.svg",i.LoadBorders.bind(null,a),function(e){console.log("loading...")},function(e){console.error(e)})}(document.getElementById("globe"))}},[["tjUo",5,1,2,3,4]]]);