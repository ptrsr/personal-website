(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"93cA":function(e,t,n){e.exports=n.p+"c37b97b969656107e679d7ad8ef77a79.woff"},J6RI:function(e,t,n){t=e.exports=n("JPst")(!1);var o=n("HeW1"),a=o(n("aZUD")),r=o(n("93cA")),i=o(n("cEfc"));t.push([e.i,'\n/* COLOR PALETTE */\n:root {\n    --GR1: #191a1d;\n    --GR2: #202124;\n    --GR3: #2d2e30;\n    --GR4: #3f4042;\n    --GR5: #d9d9d9;\n}\n\n/* GLOBAL */\nbody {\n    margin: 0;\n    background-color: var(--GR1);\n}\n\n#globe {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: -1;\n}\n\n/* FONTS */\n@font-face {\n    font-family: "din";\n    src: url('+a+") format('woff');\n}\n@font-face {\n    font-family: \"din\";\n    src: url("+r+") format('woff');\n    font-weight: bold;\n}\n@font-face {\n    font-family: \"din\";\n    src: url("+i+") format('woff');\n    font-style: italic;\n}\n* { font-family: \"din\" }\n\n/* HEADER */\nheader {\n    color: var(--GR5);\n    font-weight: bold;\n    width: 100%;\n    height: 95%;\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    z-index: -1;\n}\nheader .main {\n    margin: auto;\n    margin-left: 2%;\n    width: 46%;\n    padding-top: 5%;\n}\nheader .pretitle {\n    font-size: 4em;\n}\nheader .title {\n    font-size: 7em;\n}\n\n/* SECTIONS */\nsection {\n    width: 100%;\n    height: 95%;\n}\n\nsection h1 {\n    padding-top: 0.5em;\n    margin-top: 0;\n    font-size: 5em;\n    text-align: center;\n}\n\n/* NAV */\nnav {\n    width: 100%;\n    height: 5%;\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    background-color: var(--GR5);\n}\n\n.dark {\n    color: var(--GR5);\n    background-color: var(--GR1);\n}\n.gray {\n    color: var(--GR5);\n    background-color: var(--GR4);\n}\n.white {\n    color: var(--GR2);\n    background-color: var(--GR5);\n}\n\n\n.test {\n    position: relative;\n}",""])},OMi8:function(e,t,n){var o=n("J6RI");"string"==typeof o&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};n("LboF")(o,a);o.locals&&(e.exports=o.locals)},aZUD:function(e,t,n){e.exports=n.p+"7d2271b97e1fc197a8410ec269814cbc.woff"},cEfc:function(e,t,n){e.exports=n.p+"e6713781e2b16fe3b5fafd8117433ee4.woff"},tjUo:function(e,t,n){"use strict";n.r(t);n("OMi8");function o(e,t){var n,o,a,r,i;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new ne.B,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:ne.l.ROTATE,MIDDLE:ne.l.DOLLY,RIGHT:ne.l.PAN},this.touches={ONE:ne.y.ROTATE,TWO:ne.y.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(s),c.update(),d=p.NONE},this.update=(n=new ne.B,o=(new ne.s).setFromUnitVectors(e.up,new ne.B(0,1,0)),a=o.clone().inverse(),r=new ne.B,i=new ne.s,function(){var e=c.object.position;return n.copy(e).sub(c.target),n.applyQuaternion(o),f.setFromVector3(n),c.autoRotate&&d===p.NONE&&_(2*Math.PI/60/60*c.autoRotateSpeed),c.enableDamping?(f.theta+=h.theta*c.dampingFactor,f.phi+=h.phi*c.dampingFactor):(f.theta+=h.theta,f.phi+=h.phi),f.theta=Math.max(c.minAzimuthAngle,Math.min(c.maxAzimuthAngle,f.theta)),f.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=v,f.radius=Math.max(c.minDistance,Math.min(c.maxDistance,f.radius)),!0===c.enableDamping?c.target.addScaledVector(y,c.dampingFactor):c.target.add(y),n.setFromSpherical(f),n.applyQuaternion(a),e.copy(c.target).add(n),c.object.lookAt(c.target),!0===c.enableDamping?(h.theta*=1-c.dampingFactor,h.phi*=1-c.dampingFactor,y.multiplyScalar(1-c.dampingFactor)):(h.set(0,0,0),y.set(0,0,0)),v=1,!(!(b||r.distanceToSquared(c.object.position)>m||8*(1-i.dot(c.object.quaternion))>m)||(c.dispatchEvent(s),r.copy(c.object.position),i.copy(c.object.quaternion),b=!1))}),this.dispose=function(){c.domElement.removeEventListener("contextmenu",te,!1),c.domElement.removeEventListener("mousedown",B,!1),c.domElement.removeEventListener("wheel",J,!1),c.domElement.removeEventListener("touchstart",Q,!1),c.domElement.removeEventListener("touchend",ee,!1),c.domElement.removeEventListener("touchmove",$,!1),document.removeEventListener("mousemove",Z,!1),document.removeEventListener("mouseup",W,!1),window.removeEventListener("keydown",K,!1)};var c=this,s={type:"change"},l={type:"start"},u={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=p.NONE,m=1e-6,f=new ne.x,h=new ne.x,v=1,y=new ne.B,b=!1,g=new ne.A,x=new ne.A,w=new ne.A,A=new ne.A,M=new ne.A,P=new ne.A,T=new ne.A,E=new ne.A,k=new ne.A;function O(){return Math.pow(.95,c.zoomSpeed)}function _(e){h.theta-=e}function S(e){h.phi-=e}var D,L,C,R=(D=new ne.B,function(e,t){D.setFromMatrixColumn(t,0),D.multiplyScalar(-e),y.add(D)}),z=(L=new ne.B,function(e,t){!0===c.screenSpacePanning?L.setFromMatrixColumn(t,1):(L.setFromMatrixColumn(t,0),L.crossVectors(c.object.up,L)),L.multiplyScalar(e),y.add(L)}),j=(C=new ne.B,function(e,t){var n=c.domElement===document?c.domElement.body:c.domElement;if(c.object.isPerspectiveCamera){var o=c.object.position;C.copy(o).sub(c.target);var a=C.length();a*=Math.tan(c.object.fov/2*Math.PI/180),R(2*e*a/n.clientHeight,c.object.matrix),z(2*t*a/n.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(R(e*(c.object.right-c.object.left)/c.object.zoom/n.clientWidth,c.object.matrix),z(t*(c.object.top-c.object.bottom)/c.object.zoom/n.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)});function N(e){c.object.isPerspectiveCamera?v/=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function H(e){c.object.isPerspectiveCamera?v*=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function I(e){g.set(e.clientX,e.clientY)}function V(e){A.set(e.clientX,e.clientY)}function F(e){if(1==e.touches.length)g.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);g.set(t,n)}}function Y(e){if(1==e.touches.length)A.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(t,n)}}function G(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);T.set(0,o)}function U(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,n)}w.subVectors(x,g).multiplyScalar(c.rotateSpeed);var o=c.domElement===document?c.domElement.body:c.domElement;_(2*Math.PI*w.x/o.clientHeight),S(2*Math.PI*w.y/o.clientHeight),g.copy(x)}function X(e){if(1==e.touches.length)M.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);M.set(t,n)}P.subVectors(M,A).multiplyScalar(c.panSpeed),j(P.x,P.y),A.copy(M)}function q(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);E.set(0,o),k.set(0,Math.pow(E.y/T.y,c.zoomSpeed)),N(k.y),T.copy(E)}function B(e){if(console.log(!0),!1!==c.enabled){switch(e.preventDefault(),c.domElement.focus?c.domElement.focus():window.focus(),e.button){case 0:switch(c.mouseButtons.LEFT){case ne.l.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enablePan)return;V(e),d=p.PAN}else{if(!1===c.enableRotate)return;I(e),d=p.ROTATE}break;case ne.l.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enableRotate)return;I(e),d=p.ROTATE}else{if(!1===c.enablePan)return;V(e),d=p.PAN}break;default:d=p.NONE}break;case 1:switch(c.mouseButtons.MIDDLE){case ne.l.DOLLY:if(!1===c.enableZoom)return;!function(e){T.set(e.clientX,e.clientY)}(e),d=p.DOLLY;break;default:d=p.NONE}break;case 2:switch(c.mouseButtons.RIGHT){case ne.l.ROTATE:if(!1===c.enableRotate)return;I(e),d=p.ROTATE;break;case ne.l.PAN:if(!1===c.enablePan)return;V(e),d=p.PAN;break;default:d=p.NONE}}d!==p.NONE&&(document.addEventListener("mousemove",Z,!1),document.addEventListener("mouseup",W,!1),c.dispatchEvent(l))}}function Z(e){if(!1!==c.enabled)switch(e.preventDefault(),d){case p.ROTATE:if(!1===c.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),w.subVectors(x,g).multiplyScalar(c.rotateSpeed);var t=c.domElement===document?c.domElement.body:c.domElement;_(2*Math.PI*w.x/t.clientHeight),S(2*Math.PI*w.y/t.clientHeight),g.copy(x),c.update()}(e);break;case p.DOLLY:if(!1===c.enableZoom)return;!function(e){E.set(e.clientX,e.clientY),k.subVectors(E,T),0<k.y?N(O()):k.y<0&&H(O()),T.copy(E),c.update()}(e);break;case p.PAN:if(!1===c.enablePan)return;!function(e){M.set(e.clientX,e.clientY),P.subVectors(M,A).multiplyScalar(c.panSpeed),j(P.x,P.y),A.copy(M),c.update()}(e)}}function W(e){!1!==c.enabled&&(document.removeEventListener("mousemove",Z,!1),document.removeEventListener("mouseup",W,!1),c.dispatchEvent(u),d=p.NONE)}function J(e){!1===c.enabled||!1===c.enableZoom||d!==p.NONE&&d!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),c.dispatchEvent(l),function(e){e.deltaY<0?H(O()):0<e.deltaY&&N(O()),c.update()}(e),c.dispatchEvent(u))}function K(e){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(e){var t=!1;switch(e.keyCode){case c.keys.UP:j(0,c.keyPanSpeed),t=!0;break;case c.keys.BOTTOM:j(0,-c.keyPanSpeed),t=!0;break;case c.keys.LEFT:j(c.keyPanSpeed,0),t=!0;break;case c.keys.RIGHT:j(-c.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),c.update())}(e)}function Q(e){if(!1!==c.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(c.touches.ONE){case ne.y.ROTATE:if(!1===c.enableRotate)return;F(e),d=p.TOUCH_ROTATE;break;case ne.y.PAN:if(!1===c.enablePan)return;Y(e),d=p.TOUCH_PAN;break;default:d=p.NONE}break;case 2:switch(c.touches.TWO){case ne.y.DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&G(e),c.enablePan&&Y(e)}(e),d=p.TOUCH_DOLLY_PAN;break;case ne.y.DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&G(e),c.enableRotate&&F(e)}(e),d=p.TOUCH_DOLLY_ROTATE;break;default:d=p.NONE}break;default:d=p.NONE}d!==p.NONE&&c.dispatchEvent(l)}}function $(e){if(!1!==c.enabled)switch(e.preventDefault(),e.stopPropagation(),d){case p.TOUCH_ROTATE:if(!1===c.enableRotate)return;U(e),c.update();break;case p.TOUCH_PAN:if(!1===c.enablePan)return;X(e),c.update();break;case p.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&q(e),c.enablePan&&X(e)}(e),c.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&q(e),c.enableRotate&&U(e)}(e),c.update();break;default:d=p.NONE}}function ee(e){!1!==c.enabled&&(c.dispatchEvent(u),d=p.NONE)}function te(e){!1!==c.enabled&&e.preventDefault()}c.domElement.addEventListener("contextmenu",te,!1),c.domElement.addEventListener("mousedown",B,!1),c.domElement.addEventListener("wheel",J,!1),c.domElement.addEventListener("touchstart",Q,!1),c.domElement.addEventListener("touchend",ee,!1),c.domElement.addEventListener("touchmove",$,!1),window.addEventListener("keydown",K,!1),this.update()}var ne=n("Womt");(o.prototype=Object.create(ne.f.prototype)).constructor=o;function a(e,t){o.call(this,e,t),this.mouseButtons.LEFT=ne.l.PAN,this.mouseButtons.RIGHT=ne.l.ROTATE,this.touches.ONE=ne.y.PAN,this.touches.TWO=ne.y.DOLLY_ROTATE}(a.prototype=Object.create(ne.f.prototype)).constructor=a;var s=o;function l(e){var r=this,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:60;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(this,"record",function(e){if(r.samples.length>r.sampleCount&&r.samples.shift(),r.samples.push(e),r.lastUpdate+=e,!(r.lastUpdate<.1)){r.lastUpdate%=.1;for(var t=0,n=0;n<r.samples.length;n++)t+=r.samples[n];var o=1/(t/r.samples.length),a=parseInt(o);r.element.innerHTML="".concat(a)}});var n=document.createElement("div");n.innerHTML="0",n.style.color="white",e.appendChild(n),this.sampleCount=t,this.element=n,this.samples=[],this.lastUpdate=0}function u(e){ne.k.call(this,e)}var F,Y,G,U,X,q,B,Z,W,J,K,Q,$,ee,te,oe,ae;u.prototype=Object.assign(Object.create(ne.k.prototype),{constructor:u,load:function(e,t,n,o){var a=this,r=new ne.g(a.manager);r.setPath(a.path),r.load(e,function(e){t(a.parse(e))},n,o)},parse:function(e){function g(e,t,n,o,a,r,i,c){o=o*Math.PI/180,t=Math.abs(t),n=Math.abs(n);var s=(i.x-c.x)/2,l=(i.y-c.y)/2,u=Math.cos(o)*s+Math.sin(o)*l,p=-Math.sin(o)*s+Math.cos(o)*l,d=t*t,m=n*n,f=u*u,h=p*p,v=f/d+h/m;if(1<v){var y=Math.sqrt(v);d=(t*=y)*t,m=(n*=y)*n}var b=d*h+m*f,g=(d*m-b)/b,x=Math.sqrt(Math.max(0,g));a===r&&(x=-x);var w=x*t*p/n,A=-x*n*u/t,M=Math.cos(o)*w-Math.sin(o)*A+(i.x+c.x)/2,P=Math.sin(o)*w+Math.cos(o)*A+(i.y+c.y)/2,T=k(1,0,(u-w)/t,(p-A)/n),E=k((u-w)/t,(p-A)/n,(-u-w)/t,(-p-A)/n)%(2*Math.PI);e.currentPath.absellipse(M,P,t,n,T,T+E,0===r,o)}function k(e,t,n,o){var a=e*n+t*o,r=Math.sqrt(e*e+t*t)*Math.sqrt(n*n+o*o),i=Math.acos(Math.max(-1,Math.min(1,a/r)));return e*o-t*n<0&&(i=-i),i}function c(o,a){function e(e,t,n){void 0===n&&(n=function(e){return e}),o.hasAttribute(e)&&(a[t]=n(o.getAttribute(e))),""!==o.style[e]&&(a[t]=n(o.style[e]))}function t(e){return Math.max(0,Math.min(1,e))}function n(e){return Math.max(0,e)}return a=Object.assign({},a),e("fill","fill"),e("fill-opacity","fillOpacity",t),e("stroke","stroke"),e("stroke-opacity","strokeOpacity",t),e("stroke-width","strokeWidth",n),e("stroke-linejoin","strokeLineJoin"),e("stroke-linecap","strokeLineCap"),e("stroke-miterlimit","strokeMiterLimit",n),a}function x(e,t){return e-(t-e)}function w(e){for(var t=e.split(/[\s,]+|(?=\s?[+\-])/),n=0;n<t.length;n++){var o=t[n];if(o.indexOf(".")!==o.lastIndexOf("."))for(var a=o.split("."),r=2;r<a.length;r++)t.splice(n+r-1,0,"0."+a[r]);t[n]=parseFloat(o)}return t}console.log("THREE.SVGLoader");var s=[],l=[],y=new ne.m,b=new ne.m,A=new ne.m,M=new ne.m,d=new ne.A,m=new ne.B,u=new ne.m;console.time("THREE.SVGLoader: DOMParser");var t=(new DOMParser).parseFromString(e,"image/svg+xml");console.timeEnd("THREE.SVGLoader: DOMParser"),console.time("THREE.SVGLoader: Parse"),function e(t,n){if(1===t.nodeType){var o=function(e){if(!e.hasAttribute("transform"))return null;var t=function(e){for(var t=new ne.m,n=y,o=e.getAttribute("transform").split(")"),a=o.length-1;0<=a;a--){var r=o[a].trim();if(""!==r){var i=r.indexOf("("),c=r.length;if(0<i&&i<c){var s=r.substr(0,i),l=w(r.substr(i+1,c-i-1));switch(n.identity(),s){case"translate":if(1<=l.length){var u=l[0],p=u;2<=l.length&&(p=l[1]),n.translate(u,p)}break;case"rotate":if(1<=l.length){var d,m=0,f=0;d=-l[0]*Math.PI/180,3<=l.length&&(m=l[1],f=l[2]),b.identity().translate(-m,-f),A.identity().rotate(d),M.multiplyMatrices(A,b),b.identity().translate(m,f),n.multiplyMatrices(b,M)}break;case"scale":if(1<=l.length){var h=l[0],v=h;2<=l.length&&(v=l[1]),n.scale(h,v)}break;case"skewX":1===l.length&&n.set(1,Math.tan(l[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===l.length&&n.set(1,0,0,Math.tan(l[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===l.length&&n.set(l[0],l[2],l[4],l[1],l[3],l[5],0,0,1)}}t.premultiply(n)}}return t}(e);return 0<l.length&&t.premultiply(l[l.length-1]),u.copy(t),l.push(t),t}(t),a=null;switch(t.nodeName){case"svg":break;case"g":n=c(t,n);break;case"path":n=c(t,n),t.hasAttribute("d")&&(a=function(e){for(var t=new ne.w,n=new ne.A,o=new ne.A,a=new ne.A,r=!0,i=!1,c=e.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi),s=0,l=c.length;s<l;s++){var u=c[s],p=u.charAt(0),d=u.substr(1).trim();switch(!0===r&&(r=!(i=!0)),p){case"M":for(var m=w(d),f=0,h=m.length;f<h;f+=2)n.x=m[f+0],n.y=m[f+1],o.x=n.x,o.y=n.y,0===f?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y),0===f&&!0===i&&a.copy(n);break;case"H":for(m=w(d),f=0,h=m.length;f<h;f++)n.x=m[f],o.x=n.x,o.y=n.y,t.lineTo(n.x,n.y),0===f&&!0===i&&a.copy(n);break;case"V":for(m=w(d),f=0,h=m.length;f<h;f++)n.y=m[f],o.x=n.x,o.y=n.y,t.lineTo(n.x,n.y),0===f&&!0===i&&a.copy(n);break;case"L":for(m=w(d),f=0,h=m.length;f<h;f+=2)n.x=m[f+0],n.y=m[f+1],o.x=n.x,o.y=n.y,t.lineTo(n.x,n.y),0===f&&!0===i&&a.copy(n);break;case"C":for(m=w(d),f=0,h=m.length;f<h;f+=6)t.bezierCurveTo(m[f+0],m[f+1],m[f+2],m[f+3],m[f+4],m[f+5]),o.x=m[f+2],o.y=m[f+3],n.x=m[f+4],n.y=m[f+5],0===f&&!0===i&&a.copy(n);break;case"S":for(m=w(d),f=0,h=m.length;f<h;f+=4)t.bezierCurveTo(x(n.x,o.x),x(n.y,o.y),m[f+0],m[f+1],m[f+2],m[f+3]),o.x=m[f+0],o.y=m[f+1],n.x=m[f+2],n.y=m[f+3],0===f&&!0===i&&a.copy(n);break;case"Q":for(m=w(d),f=0,h=m.length;f<h;f+=4)t.quadraticCurveTo(m[f+0],m[f+1],m[f+2],m[f+3]),o.x=m[f+0],o.y=m[f+1],n.x=m[f+2],n.y=m[f+3],0===f&&!0===i&&a.copy(n);break;case"T":for(m=w(d),f=0,h=m.length;f<h;f+=2){var v=x(n.x,o.x),y=x(n.y,o.y);t.quadraticCurveTo(v,y,m[f+0],m[f+1]),o.x=v,o.y=y,n.x=m[f+0],n.y=m[f+1],0===f&&!0===i&&a.copy(n)}break;case"A":for(m=w(d),f=0,h=m.length;f<h;f+=7){var b=n.clone();n.x=m[f+5],n.y=m[f+6],o.x=n.x,o.y=n.y,g(t,m[f],m[f+1],m[f+2],m[f+3],m[f+4],b,n),0===f&&!0===i&&a.copy(n)}break;case"m":for(m=w(d),f=0,h=m.length;f<h;f+=2)n.x+=m[f+0],n.y+=m[f+1],o.x=n.x,o.y=n.y,0===f?t.moveTo(n.x,n.y):t.lineTo(n.x,n.y),0===f&&!0===i&&a.copy(n);break;case"h":for(m=w(d),f=0,h=m.length;f<h;f++)n.x+=m[f],o.x=n.x,o.y=n.y,t.lineTo(n.x,n.y),0===f&&!0===i&&a.copy(n);break;case"v":for(m=w(d),f=0,h=m.length;f<h;f++)n.y+=m[f],o.x=n.x,o.y=n.y,t.lineTo(n.x,n.y),0===f&&!0===i&&a.copy(n);break;case"l":for(m=w(d),f=0,h=m.length;f<h;f+=2)n.x+=m[f+0],n.y+=m[f+1],o.x=n.x,o.y=n.y,t.lineTo(n.x,n.y),0===f&&!0===i&&a.copy(n);break;case"c":for(m=w(d),f=0,h=m.length;f<h;f+=6)t.bezierCurveTo(n.x+m[f+0],n.y+m[f+1],n.x+m[f+2],n.y+m[f+3],n.x+m[f+4],n.y+m[f+5]),o.x=n.x+m[f+2],o.y=n.y+m[f+3],n.x+=m[f+4],n.y+=m[f+5],0===f&&!0===i&&a.copy(n);break;case"s":for(m=w(d),f=0,h=m.length;f<h;f+=4)t.bezierCurveTo(x(n.x,o.x),x(n.y,o.y),n.x+m[f+0],n.y+m[f+1],n.x+m[f+2],n.y+m[f+3]),o.x=n.x+m[f+0],o.y=n.y+m[f+1],n.x+=m[f+2],n.y+=m[f+3],0===f&&!0===i&&a.copy(n);break;case"q":for(m=w(d),f=0,h=m.length;f<h;f+=4)t.quadraticCurveTo(n.x+m[f+0],n.y+m[f+1],n.x+m[f+2],n.y+m[f+3]),o.x=n.x+m[f+0],o.y=n.y+m[f+1],n.x+=m[f+2],n.y+=m[f+3],0===f&&!0===i&&a.copy(n);break;case"t":for(m=w(d),f=0,h=m.length;f<h;f+=2)v=x(n.x,o.x),y=x(n.y,o.y),t.quadraticCurveTo(v,y,n.x+m[f+0],n.y+m[f+1]),o.x=v,o.y=y,n.x=n.x+m[f+0],n.y=n.y+m[f+1],0===f&&!0===i&&a.copy(n);break;case"a":for(m=w(d),f=0,h=m.length;f<h;f+=7)b=n.clone(),n.x+=m[f+5],n.y+=m[f+6],o.x=n.x,o.y=n.y,g(t,m[f],m[f+1],m[f+2],m[f+3],m[f+4],b,n),0===f&&!0===i&&a.copy(n);break;case"Z":case"z":t.currentPath.autoClose=!0,0<t.currentPath.curves.length&&(n.copy(a),t.currentPath.currentPoint.copy(n),r=!0);break;default:console.warn(u)}i=!1}return t}(t));break;case"rect":n=c(t,n),a=function(e){var t=parseFloat(e.getAttribute("x")||0),n=parseFloat(e.getAttribute("y")||0),o=parseFloat(e.getAttribute("rx")||0),a=parseFloat(e.getAttribute("ry")||0),r=parseFloat(e.getAttribute("width")),i=parseFloat(e.getAttribute("height")),c=new ne.w;return c.moveTo(t+2*o,n),c.lineTo(t+r-2*o,n),0===o&&0===a||c.bezierCurveTo(t+r,n,t+r,n,t+r,n+2*a),c.lineTo(t+r,n+i-2*a),0===o&&0===a||c.bezierCurveTo(t+r,n+i,t+r,n+i,t+r-2*o,n+i),c.lineTo(t+2*o,n+i),0===o&&0===a||c.bezierCurveTo(t,n+i,t,n+i,t,n+i-2*a),c.lineTo(t,n+2*a),0===o&&0===a||c.bezierCurveTo(t,n,t,n,t+2*o,n),c}(t);break;case"polygon":n=c(t,n),a=function(e){var r=new ne.w,i=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(e,t,n){var o=parseFloat(t),a=parseFloat(n);0===i?r.moveTo(o,a):r.lineTo(o,a),i++}),r.currentPath.autoClose=!0,r}(t);break;case"polyline":n=c(t,n),a=function(e){var r=new ne.w,i=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(e,t,n){var o=parseFloat(t),a=parseFloat(n);0===i?r.moveTo(o,a):r.lineTo(o,a),i++}),r.currentPath.autoClose=!1,r}(t);break;case"circle":n=c(t,n),a=function(e){var t=parseFloat(e.getAttribute("cx")),n=parseFloat(e.getAttribute("cy")),o=parseFloat(e.getAttribute("r")),a=new ne.p;a.absarc(t,n,o,0,2*Math.PI);var r=new ne.w;return r.subPaths.push(a),r}(t);break;case"ellipse":n=c(t,n),a=function(e){var t=parseFloat(e.getAttribute("cx")),n=parseFloat(e.getAttribute("cy")),o=parseFloat(e.getAttribute("rx")),a=parseFloat(e.getAttribute("ry")),r=new ne.p;r.absellipse(t,n,o,a,0,2*Math.PI);var i=new ne.w;return i.subPaths.push(r),i}(t);break;case"line":n=c(t,n),a=function(e){var t=parseFloat(e.getAttribute("x1")),n=parseFloat(e.getAttribute("y1")),o=parseFloat(e.getAttribute("x2")),a=parseFloat(e.getAttribute("y2")),r=new ne.w;return r.moveTo(t,n),r.lineTo(o,a),r.currentPath.autoClose=!1,r}(t);break;default:console.log(t)}a&&(void 0!==n.fill&&"none"!==n.fill&&a.color.setStyle(n.fill),function(e,t){function n(e){m.set(e.x,e.y,1).applyMatrix3(t),e.set(m.x,m.y)}for(var o=function(e){return 0!==e.elements[1]||0!==e.elements[3]}(t),a=e.subPaths,r=0,i=a.length;r<i;r++)for(var c=a[r].curves,s=0;s<c.length;s++){var l=c[s];l.isLineCurve?(n(l.v1),n(l.v2)):l.isCubicBezierCurve?(n(l.v0),n(l.v1),n(l.v2),n(l.v3)):l.isQuadraticBezierCurve?(n(l.v0),n(l.v1),n(l.v2)):l.isEllipseCurve&&(o&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),d.set(l.aX,l.aY),n(d),l.aX=d.x,l.aY=d.y,l.xRadius*=(p=t.elements,Math.sqrt(p[0]*p[0]+p[1]*p[1])),l.yRadius*=(u=t.elements,Math.sqrt(u[3]*u[3]+u[4]*u[4])))}var u,p}(a,u),s.push(a),a.userData={node:t,style:n});for(var r=t.childNodes,i=0;i<r.length;i++)e(r[i],n);o&&(l.pop(),0<l.length?u.copy(l[l.length-1]):u.identity())}}(t.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});var n={paths:s,xml:t.documentElement};return console.timeEnd("THREE.SVGLoader: Parse"),n}}),u.getStrokeStyle=function(e,t,n,o,a){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:o=void 0!==o?o:"butt",strokeMiterLimit:a=void 0!==a?a:4}},u.pointsToStroke=function(e,t,n,o){var a=[],r=[],i=[];if(0===u.pointsToStrokeWithBuffers(e,t,n,o,a,r,i))return null;var c=new ne.a;return c.addAttribute("position",new ne.h(a,3)),c.addAttribute("normal",new ne.h(r,3)),c.addAttribute("uv",new ne.h(i,2)),c},u.pointsToStrokeWithBuffers=(F=new ne.A,Y=new ne.A,G=new ne.A,U=new ne.A,X=new ne.A,q=new ne.A,B=new ne.A,Z=new ne.A,W=new ne.A,J=new ne.A,K=new ne.A,Q=new ne.A,$=new ne.A,ee=new ne.A,te=new ne.A,oe=new ne.A,ae=new ne.A,function(e,c,l,r,s,o,a,t){l=void 0!==l?l:12,r=void 0!==r?r:.001,t=void 0!==t?t:0;var n=(e=function(e){for(var t=!1,n=1,o=e.length-1;n<o;n++)if(e[n].distanceTo(e[n+1])<r){t=!0;break}if(!t)return e;var a=[];for(a.push(e[0]),n=1,o=e.length-1;n<o;n++)e[n].distanceTo(e[n+1])>=r&&a.push(e[n]);return a.push(e[e.length-1]),a}(e)).length;if(n<2)return 0;var i,u,p,d,m,f=e[0].equals(e[n-1]),h=e[0],v=c.strokeWidth/2,y=1/(n-1),b=0,g=!1,x=0,w=3*t,A=2*t;R(e[0],e[1],F).multiplyScalar(v),Z.copy(e[0]).sub(F),W.copy(e[0]).add(F),J.copy(Z),K.copy(W);for(var M=1;M<n;M++){i=e[M],u=M===n-1?f?e[1]:void 0:e[M+1];var P=F;R(h,i,P),G.copy(P).multiplyScalar(v),Q.copy(i).sub(G),$.copy(i).add(G);var T=b+y;if(p=!1,void 0!==u){R(i,u,Y),G.copy(Y).multiplyScalar(v),ee.copy(i).sub(G),te.copy(i).add(G),d=!0,G.subVectors(u,h),P.dot(G)<0&&(d=!1),1===M&&(g=d),G.subVectors(u,i),G.normalize();var E=Math.abs(P.dot(G));if(0!==E){var k=v/E;G.multiplyScalar(-k),U.subVectors(i,h),X.copy(U).setLength(k).add(G),oe.copy(X).negate();var O=X.length(),_=U.length();U.divideScalar(_),q.subVectors(u,i);var S=q.length();switch(q.divideScalar(S),U.dot(oe)<_&&q.dot(oe)<S&&(p=!0),ae.copy(X).add(i),oe.add(i),m=!1,p?d?(te.copy(oe),$.copy(oe)):(ee.copy(oe),Q.copy(oe)):N(),c.strokeLineJoin){case"bevel":H(d,p,T);break;case"round":I(d,p),d?j(i,Q,ee,T,0):j(i,te,$,T,1);break;case"miter":case"miter-clip":default:var D=v*c.strokeMiterLimit/O;if(D<1){if("miter-clip"!==c.strokeLineJoin){H(d,p,T);break}I(d,p),d?(q.subVectors(ae,Q).multiplyScalar(D).add(Q),B.subVectors(ae,ee).multiplyScalar(D).add(ee),z(Q,T,0),z(q,T,0),z(i,T,.5),z(i,T,.5),z(q,T,0),z(B,T,0),z(i,T,.5),z(B,T,0),z(ee,T,0)):(q.subVectors(ae,$).multiplyScalar(D).add($),B.subVectors(ae,te).multiplyScalar(D).add(te),z($,T,1),z(q,T,1),z(i,T,.5),z(i,T,.5),z(q,T,1),z(B,T,1),z(i,T,.5),z(B,T,1),z(te,T,1))}else p?(d?(z(W,b,1),z(Z,b,0),z(ae,T,0),z(W,b,1),z(ae,T,0),z(oe,T,1)):(z(W,b,1),z(Z,b,0),z(ae,T,1),z(Z,b,0),z(oe,T,0),z(ae,T,1)),d?ee.copy(ae):te.copy(ae)):d?(z(Q,T,0),z(ae,T,0),z(i,T,.5),z(i,T,.5),z(ae,T,0),z(ee,T,0)):(z($,T,1),z(ae,T,1),z(i,T,.5),z(i,T,.5),z(ae,T,1),z(te,T,1)),m=!0}}else N()}else N();f||M!==n-1||V(e[0],J,K,d,!0,b),b=T,h=i,Z.copy(ee),W.copy(te)}if(f){if(p&&s){var L=ae,C=oe;g!==d&&(L=oe,C=ae),d?(C.toArray(s,0),C.toArray(s,9),m&&L.toArray(s,3)):(C.toArray(s,3),C.toArray(s,9),m&&L.toArray(s,0))}}else V(i,Q,$,d,!1,T);return x;function R(e,t,n){return n.subVectors(t,e),n.set(-n.y,n.x).normalize()}function z(e,t,n){s&&(s[w]=e.x,s[w+1]=e.y,s[w+2]=0,o&&(o[w]=0,o[w+1]=0,o[w+2]=1),w+=3,a&&(a[A]=t,a[A+1]=n,A+=2)),x+=3}function j(e,t,n,o,a){F.copy(t).sub(e).normalize(),Y.copy(n).sub(e).normalize();var r=Math.PI,i=F.dot(Y);Math.abs(i)<1&&(r=Math.abs(Math.acos(i))),r/=l,G.copy(t);for(var c=0,s=l-1;c<s;c++)U.copy(G).rotateAround(e,r),z(G,o,a),z(U,o,a),z(e,o,.5),G.copy(U);z(U,o,a),z(n,o,a),z(e,o,.5)}function N(){z(W,b,1),z(Z,b,0),z(Q,T,0),z(W,b,1),z(Q,T,1),z($,T,0)}function H(e,t,n){t?(e?(z(W,b,1),z(Z,b,0),z(Q,T,0),z(W,b,1),z(Q,T,0),z(oe,T,1),z(Q,n,0),z(ee,n,0)):(z(W,b,1),z(Z,b,0),z($,T,1),z(Z,b,0),z(oe,T,0),z($,T,1),z($,n,1),z(te,n,0)),z(oe,n,.5)):(e?(z(Q,n,0),z(ee,n,0)):(z($,n,1),z(te,n,0)),z(i,n,.5))}function I(e,t){t&&(e?(z(W,b,1),z(Z,b,0),z(Q,T,0),z(W,b,1),z(Q,T,0),z(oe,T,1),z(Q,b,0),z(i,T,.5),z(oe,T,1),z(i,T,.5),z(ee,b,0),z(oe,T,1)):(z(W,b,1),z(Z,b,0),z($,T,1),z(Z,b,0),z(oe,T,0),z($,T,1),z($,b,1),z(oe,T,0),z(i,T,.5),z(i,T,.5),z(oe,T,0),z(te,b,1)))}function V(e,t,n,o,a,r){switch(c.strokeLineCap){case"round":a?j(e,n,t,r,.5):j(e,t,n,r,.5);break;case"square":if(a)F.subVectors(t,e),Y.set(F.y,-F.x),G.addVectors(F,Y).add(e),U.subVectors(Y,F).add(e),o?(G.toArray(s,3),U.toArray(s,0),U.toArray(s,9)):(G.toArray(s,3),G.toArray(s,9),U.toArray(s,0));else{F.subVectors(n,e),Y.set(F.y,-F.x),G.addVectors(F,Y).add(e),U.subVectors(Y,F).add(e);var i=s.length;o?(G.toArray(s,i-3),U.toArray(s,i-6)):(G.toArray(s,i-6),U.toArray(s,i-3)),U.toArray(s,i-12)}}}});var p=u,d="precision highp float;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 invViewMatrix;\n\nuniform vec3 cameraPosition;\n\nuniform float scale;\n\nattribute vec3 position;\nvarying vec3 fragPos;\n\n// sPos : position of sphere in 2D, where the Y should be perpendicular to camera plane\n// s    : sign for either min or max of sphere on X axis of sPos\n// returns additional correction on X axis due to projection\nfloat perspectiveCorrect(vec2 sPos, float s) {\n    float l = sqrt(pow(sPos.y, 2.0) + pow(sPos.x, 2.0));\n    float a = asin(sPos.x / l);\n    float b = asin(scale / l) * s;\n    return ((scale / cos(a + b)) - scale) * s;\n}\n\nvoid main() {\n    /* \n       first we multiply the matrices together for positioning\n       then set rotation part to identity for a billboard effect\n       (where the render plane is always parallel with the near plane)\n    */\n    mat4 modelViewMatrix = viewMatrix * modelMatrix;\n\n    // first column\n    modelViewMatrix[0][0] = scale; \n    modelViewMatrix[0][1] = 0.0; \n    modelViewMatrix[0][2] = 0.0; \n\n    // second column\n    modelViewMatrix[1][0] = 0.0; \n    modelViewMatrix[1][1] = scale; \n    modelViewMatrix[1][2] = 0.0; \n\n    // third column\n    modelViewMatrix[2][0] = 0.0; \n    modelViewMatrix[2][1] = 0.0; \n    modelViewMatrix[2][2] = scale; \n\n    // position of render plane vertex relative to camera\n    vec4 viewPos = modelViewMatrix * vec4(position, 1);\n\n    // position of sphere center relative to camera\n    vec4 spherePos = viewMatrix * modelMatrix[3];\n\n    // extend plane sides for complete render of sphere\n    viewPos.x += perspectiveCorrect(spherePos.xz, position.x);\n    viewPos.y += perspectiveCorrect(spherePos.yz, position.y);\n\n    // forward world pos of vertex to fragment shader\n    fragPos = (invViewMatrix * viewPos).xyz;\n\n    // corner positions of plane\n    gl_Position = projectionMatrix * viewPos;\n}\n";function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){function s(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var n=new ne.r(2,2),o=new ne.z,a=o.load("assets/earth/earth-day.jpg"),r=o.load("assets/earth/earth-aux.jpg"),i=o.load("assets/earth/earth-nrm.jpg");a.wrapS=ne.u,r.wrapS=ne.u,i.wrapS=ne.u;var c=new ne.t({uniforms:{lDir:{value:new ne.B},invViewMatrix:{value:new ne.n},scale:{value:e},dayTex:{type:"t",value:a},auxTex:{type:"t",value:r},nrmTex:{type:"t",value:i}},vertexShader:d,fragmentShader:"precision highp float;\n#extension GL_OES_standard_derivatives : enable\n\n#define PI 3.14159265359\n#define MAX 10000\n\n\n// scatter const\n#define RATIO 0.99\n#define RED_OUT 1.0 // TODO: remove\n\n#define ATMOS_REACH .005\n#define ATMOS_SCALE 40.0\n#define SHINE_THROUGH 0.88\n\n#define NUM_OUT_SCATTER 1.0\n#define NUM_IN_SCATTER 4.0\n\n#define PH_RAY 0.8\n#define PH_MIE 0.05\n\n\n\nuniform vec3 cameraPosition;\nuniform float scale;\nuniform mat4 invViewMatrix;\nuniform mat4 modelMatrix;\nuniform vec3 lDir;\n\n\nuniform sampler2D dayTex;\nuniform sampler2D nrmTex;\nuniform sampler2D auxTex;\n\nvarying vec3 fragPos;\n\nvec2 Sphere(vec3 origin, vec3 ray, float radius);\nvec3 MapUV(vec3 normal, vec3 ray, vec3 lightDir);\nvec3 in_scatter( vec3 o, vec3 dir, vec2 e, vec3 l, float inner, float outer );\n\nvoid main() {\n    float inner = scale * RATIO;\n    float outer = scale;\n\n    vec3 color = vec3(0);\n    \n    // out of screen ray\n    vec3 ray = normalize(cameraPosition - fragPos);\n\n    // atmosphere raycast\n    vec2 outerSphereHits = Sphere(cameraPosition, ray, outer);\n    if (outerSphereHits.x > outerSphereHits.y) {\n        gl_FragColor = vec4(0);\n        return;\n    }\n\n    // planet raycast\n    vec2 innerSphereHits = Sphere(cameraPosition, ray, inner);\n    if (innerSphereHits.x < innerSphereHits.y) {\n        // calculate world normal\n        vec3 worldPos = (ray * innerSphereHits.x);\n        vec3 normalDir = normalize(cameraPosition - worldPos);\n\n        // final earth texture\n        color = MapUV(normalDir, ray, lDir);\n    }\n\n    outerSphereHits.y = min(outerSphereHits.y, innerSphereHits.x);\n\n\n    vec3 I = in_scatter( cameraPosition, ray, -outerSphereHits.yx, lDir, inner, outer);\n    color += pow(I, vec3(1.2));\n\n    // calculate world normal\n    vec3 worldPos = (ray * outerSphereHits.x);\n    vec3 normalDir = normalize(cameraPosition - worldPos);\n\n\n    // transparent atmosphere\n    float t = min(1.0, 1.0 - dot(normalDir, ray) + 0.13);\n    t = pow(t, 5.);\n\n    t = 1. - t;\n    t = min(1., t * 5.);\n    gl_FragColor = vec4(color, t);\n}\n\n// ray intersects sphere\n// e = -b +/- sqrt( b^2 - c )\nvec2 Sphere(vec3 origin, vec3 ray, float radius) {\n\tfloat b = dot(origin, ray);\n\tfloat c = dot(origin, origin) - radius * radius;\n\t\n\tfloat d = b * b - c;\n\tif (d < 0.0) {\n\t\treturn vec2(MAX, -MAX);\n\t}\n\n\td = sqrt(d);\n\treturn vec2(b-d, b+d);\n}\n\n\nvec3 MapUV(vec3 normalDir, vec3 ray, vec3 lightDir) {\n    // https://forum.unity.com/threads/what-is-this-mipmap-artifact.657052/\n    float t = atan(normalDir.x, normalDir.z) / (2.0 * PI);\n\n    float t_a = t + 0.5;\n    float t_b = fract(t + 1.0) - 0.5;\n    \n    vec2 uv = vec2(\n        fwidth(t_a) < fwidth(t_b) ? t_a : t_b,\n        0.5 - asin(-normalDir.y) / PI\n    );\n\n    // texture mapping\n    vec3 dayMap = texture2D(dayTex, uv).rgb;\n    // vec3 normalMap = texture2D(nrmTex, uv).rgb * 2.0 - 1.0;\n    vec3 auxMap = texture2D(auxTex, uv).rgb;\n    \n    float lit = auxMap.r;\n    float specular = auxMap.g;\n    float cloud = auxMap.b;\n\n\n    // reflection of water\n    vec3 reflectDir = reflect(-lightDir, normalDir);\n\n    // TODO: optimize this bit\n    float reflectAmount = pow(max(dot(ray, reflectDir), 0.0), 15.0) * specular;\n\n\n    // clouds\n    dayMap = mix(dayMap, vec3(1), vec3(cloud * 1.1));\n\n    // normal mapPIng\n    // vec3 npole = (modelMatrix * vec4(0, 1, 0, 0)).xyz;\n    // vec3 tangent = -cross(normalDir, npole);\n    // vec3 biTangent = -cross(tangent, normalDir);\n    // mat3 tbn = mat3(tangent, biTangent, normalDir);\n\n    // vec3 normalMapDir = tbn * normalMap;\n\n    // lighting of earth\n    float shadow = max(0.01, dot(normalDir, lightDir));\n    dayMap *= shadow;\n\n    dayMap += lit * pow((1.0 - max(0., dot(lightDir, normalDir) + 0.2)), 5.0);\n\n    dayMap = mix(dayMap, vec3(1), reflectAmount / 2.0);\n\n    return dayMap;\n}\n\n\n\n// // math const\n// const float MAX = 10000.0;\n\n\n\n// Mie\n// g : ( -0.75, -0.999 )\n//      3 * ( 1 - g^2 )               1 + c^2\n// F = ----------------- * -------------------------------\n//      8PI * ( 2 + g^2 )     ( 1 + g^2 - 2 * g * c )^(3/2)\nfloat phase_mie( float g, float c, float cc ) {\n\tfloat gg = g * g;\n\t\n\tfloat a = ( 1.0 - gg ) * ( 1.0 + cc );\n\n\tfloat b = 1.0 + gg - 2.0 * g * c;\n\tb *= sqrt( b );\n\tb *= 2.0 + gg;\t\n\t\n\treturn ( 3.0 / 8.0 / PI ) * a / b;\n}\n\n// Rayleigh\n// g : 0\n// F = 3/16PI * ( 1 + c^2 )\nfloat phase_ray( float cc ) {\n\treturn ( 3.0 / 16.0 / PI ) * ( 1.0 + cc );\n}\n\n\n\nfloat density( vec3 p, float ph, float d ) {\n\treturn exp( -max( length( p ) - d, 0.0 ) / (ph * ATMOS_REACH) );\n}\n\nfloat optic( vec3 p, vec3 q, float ph, float d ) {\n\tvec3 s = ( q - p );\n\tvec3 v = p + s * 0.2;\n\t\n\tfloat sum = 0.0;\n    sum += density( v, ph, d );\n\tsum *= length( s );\n\t\n\treturn sum;\n}\n\n\n// amount of MIE shine\n#define SHINE 1.5\n\nvec3 in_scatter( vec3 o, vec3 dir, vec2 e, vec3 l, float inner, float outer ) {\n\tconst float ph_ray = PH_RAY;\n    const float ph_mie = PH_MIE;\n    \n    const vec3 k_ray = vec3( 7.8, 10.5, 17.1 ) * .5;\n    const vec3 k_mie = vec3( 27 );\n    float k_mie_ex = -0.05 * max(-0.2, min(1.0, .5 + dot( dir, -l ) * 3.0));\n    \n\tvec3 sum_ray = vec3( 0.0 );\n    vec3 sum_mie = vec3( 0.0 );\n    \n    float n_ray0 = 0.0;\n    float n_mie0 = 0.0;\n    \n\tfloat len = ( e.y - e.x ) / 5.0;\n    vec3 s = -dir * len;\n\tvec3 v = -o + -dir * ( e.x + len * 0.5 );\n    \n    vec2 f = Sphere( v, l, outer * RED_OUT ) * SHINE;\n\n\n    float d_ray = density( v, ph_ray, inner ) * len * 15.0;\n    float d_mie = density( v, ph_mie, inner ) * len;\n    \n    n_ray0 += d_ray;\n    n_mie0 += d_mie;\n\n    vec3 u = v - l * f.y;\n    \n    float n_ray1 = optic( v, u, ph_ray, inner );\n    float n_mie1 = optic( v, u, ph_mie, inner );\n    \n    vec3 att = exp( - ( n_ray0 + n_ray1 ) * k_ray - ( n_mie0 + n_mie1 ) * k_mie * k_mie_ex );\n    \n    sum_ray += d_ray * att;\n    sum_mie += d_mie * att;\n\n\n\tfloat c  = dot( dir, -l );\n\tfloat cc = c * c;\n    vec3 scatter =\n        sum_ray * k_ray * phase_ray( cc / 1000. ) +\n     \tsum_mie * k_mie * phase_mie(SHINE_THROUGH, c, cc );\n    \n\t\n\treturn ATMOS_SCALE * scatter;\n}\n",transparent:!0});return v(h(t=function(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?h(e):t}(this,f(s).call(this,n,c))),"setSunDir",function(e){t.material.uniforms.lDir.value=e}),v(h(t),"loadBorders",function(e){(new p).load(e,function(e){for(var t=new ne.i,n=e.xml.width.animVal.value,o=e.xml.height.animVal.value,a=new ne.t({vertexShader:"precision highp float;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\n\nattribute vec3 position;\n\nvoid main() {\n    gl_Position = projectionMatrix * viewMatrix * vec4(position, 1);\n}\n",fragmentShader:"precision highp float;\n\nvoid main() {\n    gl_FragColor = vec4(1);\n}\n"}),r=0;r<e.paths.length;r++){for(var i=e.paths[r],c=[],s=0;s<i.subPaths.length;s++)for(var l=i.subPaths[s].getPoints(),u=0;u<l.length;u++){var p=l[u],d=Math.PI-(p.x/n-.5)*Math.PI*2-Math.PI/2,m=-(p.y/o-.5)*Math.PI*.962-.055;c.push(Math.cos(m)*Math.cos(d)/2.02,Math.sin(m)/2.02,Math.cos(m)*Math.sin(d)/2.02)}var f=(new ne.a).addAttribute("position",new ne.h(c,3)),h=new ne.j(f,a);h.frustumCulled=!1,t.add(h)}this.add(t)}.bind(h(t)),function(e){console.log("loading...")},function(e){console.error(e)})}),t.onBeforeRender=function(e,t,n,o,a){a.uniforms.invViewMatrix.value=n.matrixWorld},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(s,ne["o"]),s}(),i=n("yVZF"),c=n.n(i);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var A=function(){function o(){var a,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var t=new ne.r(2,2),n=new ne.t({uniforms:{invViewMatrix:{value:new ne.n},scale:{value:.5}},vertexShader:d,fragmentShader:"precision highp float;\n\nvoid main() {\n        gl_FragColor = vec4(1);\n}\n",transparent:!0});return function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(x(a=function(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?x(e):t}(this,g(o).call(this,t,n))),"SetDate",function(e){var t=c.a.getPosition(e,90,0),n=(new ne.s).setFromEuler(new ne.e(-t.altitude,-t.azimuth,0)),o=new ne.B(0,0,1).applyQuaternion(n);a.position.copy(o),a.dir=o}),a.SetDate(e),a.onBeforeRender=function(e,t,n,o,a){a.uniforms.invViewMatrix.value=n.matrixWorld},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,ne["o"]),o}();function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}new function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),M(this,"start",function(){o.state.looping=!0,o.state.clock.start(),function e(t){if(t.looping){for(var n=t.clock.getDelta(),o=0;o<t.updateables.length;o++)t.updateables[o](n);t.renderer.render(t.scene,t.camera),requestAnimationFrame(e.bind(null,t))}}(o.state)}),M(this,"stop",function(){o.state.looping=!1,o.state.clock.stop()});var a=function(e){var t=new ne.v,n=new ne.q(40,window.innerWidth/window.innerHeight,.1,1e3);n.position.set(0,0,3);var o=new ne.C({canvas:e,antialias:!0});o.setClearColor(new ne.c("black")),o.setPixelRatio(window.devicePixelRatio),window.addEventListener("resize",function(e,t){var n=t.domElement,o=n.clientWidth,a=n.clientHeight;e.aspect=o/a,e.updateProjectionMatrix(),t.setSize(n.clientWidth,n.clientHeight,!1)}.bind(null,n,o),!1),window.dispatchEvent(new Event("resize"));var a=new s(n);return a.enableDamping=!0,a.dampingFactor=.05,a.minDistance=2,a.maxDistance=10,a.enablePan=!1,{scene:t,clock:new ne.b(!1),controls:a,renderer:o,camera:n,updateables:[a.update],looping:!1}}(t),r=new l(document.body);a.updateables.push(r.record);var i=new A(Date.now()),c=new y(.5);a.scene.add(c),c.setSunDir(i.dir),a.scene.background=function(e,t){var n=1<arguments.length&&void 0!==t?t:1e3,o=new ne.r(2,2),a=new ne.t({vertexShader:"precision highp float;\n\nuniform mat4 viewMatrix;\n\nattribute vec3 position;\nvarying vec3 fragPos;\n\nvoid main() {\n    fragPos = (viewMatrix * vec4(-position.x, position.y, 1, 0)).xyz;\n    gl_Position = vec4(position.xy, 1, 1);\n}\n",fragmentShader:"precision highp float;\n\nvarying vec3 fragPos;\n\nfloat snoise(vec3 v);\n\n\nvoid main() {\n    vec3 dir = normalize(fragPos) * 1000.0;\n    float lit = 0.1 + snoise(dir);\n\n    lit = pow(lit, 15.0);\n\n    vec3 color = vec3(lit);\n    gl_FragColor = vec4(color, 1);\n}\n\n\n//\tSimplex 3D Noise \n//\tby Ian McEwan, Ashima Arts\n//\nvec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}\nvec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}\n\nfloat snoise(vec3 v){ \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //  x0 = x0 - 0. + 0.0 * C \n  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\n// Permutations\n  i = mod(i, 289.0 ); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients\n// ( N*N points uniformly over a square, mapped onto an octahedron.)\n  float n_ = 1.0/7.0; // N=7\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n}\n"}),r=new ne.o(o,a);r.frustumCulled=!1;var i=new ne.v;i.add(r);var c=new ne.d(.1,20,n);return c.update(e,i),a.dispose(),o.dispose(),c.renderTarget}(a.renderer,1500),this.state=a}(document.getElementById("globe")).start()}},[["tjUo",5,1,2,3,4]]]);