(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"93cA":function(e,n,t){e.exports=t.p+"c37b97b969656107e679d7ad8ef77a79.woff"},J6RI:function(e,n,t){n=e.exports=t("JPst")(!1);var o=t("HeW1"),a=o(t("aZUD")),r=o(t("93cA")),i=o(t("cEfc"));n.push([e.i,'\n/* COLOR PALETTE */\n:root {\n    --GR1: #191a1d;\n    --GR2: #202124;\n    --GR3: #2d2e30;\n    --GR4: #3f4042;\n    --GR5: #d9d9d9;\n}\n\n/* GLOBAL */\nbody {\n    margin: 0;\n    background-color: var(--GR1);\n}\n\n#globe {\n    width: 100%;\n    height: 100%;\n    position: absolute;\n    z-index: -1;\n}\n\n/* FONTS */\n@font-face {\n    font-family: "din";\n    src: url('+a+") format('woff');\n}\n@font-face {\n    font-family: \"din\";\n    src: url("+r+") format('woff');\n    font-weight: bold;\n}\n@font-face {\n    font-family: \"din\";\n    src: url("+i+") format('woff');\n    font-style: italic;\n}\n* { font-family: \"din\" }\n\n/* HEADER */\nheader {\n    color: var(--GR5);\n    font-weight: bold;\n    width: 100%;\n    height: 95%;\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    z-index: -1;\n}\nheader .main {\n    margin: auto;\n    margin-left: 2%;\n    width: 46%;\n    padding-top: 5%;\n}\nheader .pretitle {\n    font-size: 4em;\n}\nheader .title {\n    font-size: 7em;\n}\n\n/* SECTIONS */\nsection {\n    width: 100%;\n    height: 95%;\n}\n\nsection h1 {\n    padding-top: 0.5em;\n    margin-top: 0;\n    font-size: 5em;\n    text-align: center;\n}\n\n/* NAV */\nnav {\n    width: 100%;\n    height: 5%;\n    position: -webkit-sticky;\n    position: sticky;\n    top: 0;\n    background-color: var(--GR5);\n}\n\n.dark {\n    color: var(--GR5);\n    background-color: var(--GR1);\n}\n.gray {\n    color: var(--GR5);\n    background-color: var(--GR4);\n}\n.white {\n    color: var(--GR2);\n    background-color: var(--GR5);\n}\n\n\n.test {\n    position: relative;\n}",""])},OMi8:function(e,n,t){var o=t("J6RI");"string"==typeof o&&(o=[[e.i,o,""]]);var a={insert:"head",singleton:!1};t("LboF")(o,a);o.locals&&(e.exports=o.locals)},aZUD:function(e,n,t){e.exports=t.p+"7d2271b97e1fc197a8410ec269814cbc.woff"},cEfc:function(e,n,t){e.exports=t.p+"e6713781e2b16fe3b5fafd8117433ee4.woff"},tjUo:function(e,n,t){"use strict";t.r(n);t("OMi8");function i(e,n){var t,o,a,r,i;this.object=e,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new te.r,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:te.f.ROTATE,MIDDLE:te.f.DOLLY,RIGHT:te.f.PAN},this.touches={ONE:te.o.ROTATE,TWO:te.o.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return f.phi},this.getAzimuthalAngle=function(){return f.theta},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(s),c.update(),p=m.NONE},this.update=(t=new te.r,o=(new te.j).setFromUnitVectors(e.up,new te.r(0,1,0)),a=o.clone().inverse(),r=new te.r,i=new te.j,function(){var e=c.object.position;return t.copy(e).sub(c.target),t.applyQuaternion(o),f.setFromVector3(t),c.autoRotate&&p===m.NONE&&R(2*Math.PI/60/60*c.autoRotateSpeed),c.enableDamping?(f.theta+=h.theta*c.dampingFactor,f.phi+=h.phi*c.dampingFactor):(f.theta+=h.theta,f.phi+=h.phi),f.theta=Math.max(c.minAzimuthAngle,Math.min(c.maxAzimuthAngle,f.theta)),f.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,f.phi)),f.makeSafe(),f.radius*=v,f.radius=Math.max(c.minDistance,Math.min(c.maxDistance,f.radius)),!0===c.enableDamping?c.target.addScaledVector(b,c.dampingFactor):c.target.add(b),t.setFromSpherical(f),t.applyQuaternion(a),e.copy(c.target).add(t),c.object.lookAt(c.target),!0===c.enableDamping?(h.theta*=1-c.dampingFactor,h.phi*=1-c.dampingFactor,b.multiplyScalar(1-c.dampingFactor)):(h.set(0,0,0),b.set(0,0,0)),v=1,!(!(g||r.distanceToSquared(c.object.position)>d||8*(1-i.dot(c.object.quaternion))>d)||(c.dispatchEvent(s),r.copy(c.object.position),i.copy(c.object.quaternion),g=!1))}),this.dispose=function(){c.domElement.removeEventListener("contextmenu",ne,!1),c.domElement.removeEventListener("mousedown",q,!1),c.domElement.removeEventListener("wheel",K,!1),c.domElement.removeEventListener("touchstart",Q,!1),c.domElement.removeEventListener("touchend",ee,!1),c.domElement.removeEventListener("touchmove",$,!1),document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",B,!1),window.removeEventListener("keydown",J,!1)};var c=this,s={type:"change"},l={type:"start"},u={type:"end"},m={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},p=m.NONE,d=1e-6,f=new te.n,h=new te.n,v=1,b=new te.r,g=!1,y=new te.q,w=new te.q,E=new te.q,x=new te.q,P=new te.q,T=new te.q,_=new te.q,O=new te.q,M=new te.q;function A(){return Math.pow(.95,c.zoomSpeed)}function R(e){h.theta-=e}function S(e){h.phi-=e}var N,D,L,j=(N=new te.r,function(e,n){N.setFromMatrixColumn(n,0),N.multiplyScalar(-e),b.add(N)}),k=(D=new te.r,function(e,n){!0===c.screenSpacePanning?D.setFromMatrixColumn(n,1):(D.setFromMatrixColumn(n,0),D.crossVectors(c.object.up,D)),D.multiplyScalar(e),b.add(D)}),H=(L=new te.r,function(e,n){var t=c.domElement===document?c.domElement.body:c.domElement;if(c.object.isPerspectiveCamera){var o=c.object.position;L.copy(o).sub(c.target);var a=L.length();a*=Math.tan(c.object.fov/2*Math.PI/180),j(2*e*a/t.clientHeight,c.object.matrix),k(2*n*a/t.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(j(e*(c.object.right-c.object.left)/c.object.zoom/t.clientWidth,c.object.matrix),k(n*(c.object.top-c.object.bottom)/c.object.zoom/t.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)});function I(e){c.object.isPerspectiveCamera?v/=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*e)),c.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function C(e){c.object.isPerspectiveCamera?v*=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/e)),c.object.updateProjectionMatrix(),g=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function Y(e){y.set(e.clientX,e.clientY)}function z(e){x.set(e.clientX,e.clientY)}function U(e){if(1==e.touches.length)y.set(e.touches[0].pageX,e.touches[0].pageY);else{var n=.5*(e.touches[0].pageX+e.touches[1].pageX),t=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(n,t)}}function G(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var n=.5*(e.touches[0].pageX+e.touches[1].pageX),t=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(n,t)}}function V(e){var n=e.touches[0].pageX-e.touches[1].pageX,t=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(n*n+t*t);_.set(0,o)}function X(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var n=.5*(e.touches[0].pageX+e.touches[1].pageX),t=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(n,t)}E.subVectors(w,y).multiplyScalar(c.rotateSpeed);var o=c.domElement===document?c.domElement.body:c.domElement;R(2*Math.PI*E.x/o.clientHeight),S(2*Math.PI*E.y/o.clientHeight),y.copy(w)}function F(e){if(1==e.touches.length)P.set(e.touches[0].pageX,e.touches[0].pageY);else{var n=.5*(e.touches[0].pageX+e.touches[1].pageX),t=.5*(e.touches[0].pageY+e.touches[1].pageY);P.set(n,t)}T.subVectors(P,x).multiplyScalar(c.panSpeed),H(T.x,T.y),x.copy(P)}function Z(e){var n=e.touches[0].pageX-e.touches[1].pageX,t=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(n*n+t*t);O.set(0,o),M.set(0,Math.pow(O.y/_.y,c.zoomSpeed)),I(M.y),_.copy(O)}function q(e){if(console.log(!0),!1!==c.enabled){switch(e.preventDefault(),c.domElement.focus?c.domElement.focus():window.focus(),e.button){case 0:switch(c.mouseButtons.LEFT){case te.f.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enablePan)return;z(e),p=m.PAN}else{if(!1===c.enableRotate)return;Y(e),p=m.ROTATE}break;case te.f.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enableRotate)return;Y(e),p=m.ROTATE}else{if(!1===c.enablePan)return;z(e),p=m.PAN}break;default:p=m.NONE}break;case 1:switch(c.mouseButtons.MIDDLE){case te.f.DOLLY:if(!1===c.enableZoom)return;!function(e){_.set(e.clientX,e.clientY)}(e),p=m.DOLLY;break;default:p=m.NONE}break;case 2:switch(c.mouseButtons.RIGHT){case te.f.ROTATE:if(!1===c.enableRotate)return;Y(e),p=m.ROTATE;break;case te.f.PAN:if(!1===c.enablePan)return;z(e),p=m.PAN;break;default:p=m.NONE}}p!==m.NONE&&(document.addEventListener("mousemove",W,!1),document.addEventListener("mouseup",B,!1),c.dispatchEvent(l))}}function W(e){if(!1!==c.enabled)switch(e.preventDefault(),p){case m.ROTATE:if(!1===c.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),E.subVectors(w,y).multiplyScalar(c.rotateSpeed);var n=c.domElement===document?c.domElement.body:c.domElement;R(2*Math.PI*E.x/n.clientHeight),S(2*Math.PI*E.y/n.clientHeight),y.copy(w),c.update()}(e);break;case m.DOLLY:if(!1===c.enableZoom)return;!function(e){O.set(e.clientX,e.clientY),M.subVectors(O,_),0<M.y?I(A()):M.y<0&&C(A()),_.copy(O),c.update()}(e);break;case m.PAN:if(!1===c.enablePan)return;!function(e){P.set(e.clientX,e.clientY),T.subVectors(P,x).multiplyScalar(c.panSpeed),H(T.x,T.y),x.copy(P),c.update()}(e)}}function B(e){!1!==c.enabled&&(document.removeEventListener("mousemove",W,!1),document.removeEventListener("mouseup",B,!1),c.dispatchEvent(u),p=m.NONE)}function K(e){!1===c.enabled||!1===c.enableZoom||p!==m.NONE&&p!==m.ROTATE||(e.preventDefault(),e.stopPropagation(),c.dispatchEvent(l),function(e){e.deltaY<0?C(A()):0<e.deltaY&&I(A()),c.update()}(e),c.dispatchEvent(u))}function J(e){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(e){var n=!1;switch(e.keyCode){case c.keys.UP:H(0,c.keyPanSpeed),n=!0;break;case c.keys.BOTTOM:H(0,-c.keyPanSpeed),n=!0;break;case c.keys.LEFT:H(c.keyPanSpeed,0),n=!0;break;case c.keys.RIGHT:H(-c.keyPanSpeed,0),n=!0}n&&(e.preventDefault(),c.update())}(e)}function Q(e){if(!1!==c.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(c.touches.ONE){case te.o.ROTATE:if(!1===c.enableRotate)return;U(e),p=m.TOUCH_ROTATE;break;case te.o.PAN:if(!1===c.enablePan)return;G(e),p=m.TOUCH_PAN;break;default:p=m.NONE}break;case 2:switch(c.touches.TWO){case te.o.DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&V(e),c.enablePan&&G(e)}(e),p=m.TOUCH_DOLLY_PAN;break;case te.o.DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&V(e),c.enableRotate&&U(e)}(e),p=m.TOUCH_DOLLY_ROTATE;break;default:p=m.NONE}break;default:p=m.NONE}p!==m.NONE&&c.dispatchEvent(l)}}function $(e){if(!1!==c.enabled)switch(e.preventDefault(),e.stopPropagation(),p){case m.TOUCH_ROTATE:if(!1===c.enableRotate)return;X(e),c.update();break;case m.TOUCH_PAN:if(!1===c.enablePan)return;F(e),c.update();break;case m.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&Z(e),c.enablePan&&F(e)}(e),c.update();break;case m.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&Z(e),c.enableRotate&&X(e)}(e),c.update();break;default:p=m.NONE}}function ee(e){!1!==c.enabled&&(c.dispatchEvent(u),p=m.NONE)}function ne(e){!1!==c.enabled&&e.preventDefault()}c.domElement.addEventListener("contextmenu",ne,!1),c.domElement.addEventListener("mousedown",q,!1),c.domElement.addEventListener("wheel",K,!1),c.domElement.addEventListener("touchstart",Q,!1),c.domElement.addEventListener("touchend",ee,!1),c.domElement.addEventListener("touchmove",$,!1),window.addEventListener("keydown",J,!1),this.update()}var te=t("Womt");(i.prototype=Object.create(te.d.prototype)).constructor=i;function o(e,n){i.call(this,e,n),this.mouseButtons.LEFT=te.f.PAN,this.mouseButtons.RIGHT=te.f.ROTATE,this.touches.ONE=te.o.PAN,this.touches.TWO=te.o.DOLLY_ROTATE}(o.prototype=Object.create(te.d.prototype)).constructor=o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,n){return!n||"object"!==a(n)&&"function"!=typeof n?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):n}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,n){return(r=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var c=function(){function c(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,c);var t=new te.a;t.addAttribute("vertexPos",new te.e([1,1,0,-1,1,0,1,-1,0,-1,-1,0],3)),t.setIndex([0,1,2,1,3,2]);var o=(new te.p).load("assets/earth/earth-day.jpg"),a=(new te.p).load("assets/earth/earth-aux.jpg"),r=(new te.p).load("assets/earth/earth-nrm.jpg");o.wrapS=te.l,a.wrapS=te.l,r.wrapS=te.l;var i=new te.k({uniforms:{invViewMatrix:{value:new te.g},scale:{value:n},dayTex:{type:"t",value:o},auxTex:{type:"t",value:a},nrmTex:{type:"t",value:r}},vertexShader:"precision highp float;\n\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 invViewMatrix;\n\nuniform vec3 cameraPosition;\n\nuniform float scale;\n\nattribute vec3 vertexPos;\nvarying vec3 fragPos;\n\n// sPos : position of sphere in 2D, where the Y should be perpendicular to camera plane\n// s    : sign for either min or max of sphere on X axis of sPos\n// returns additional correction on X axis due to projection\nfloat perspectiveCorrect(vec2 sPos, float s) {\n    float l = sqrt(pow(sPos.y, 2.0) + pow(sPos.x, 2.0));\n    float a = asin(sPos.x / l);\n    float b = asin(scale / l) * s;\n    return ((scale / cos(a + b)) - scale) * s;\n}\n\nvoid main() {\n    /* \n       first we multiply the matrices together for positioning\n       then set rotation part to identity for a billboard effect\n       (where the render plane is always parallel with the near plane)\n    */\n    mat4 modelViewMatrix = viewMatrix * modelMatrix;\n\n    // first column\n    modelViewMatrix[0][0] = scale; \n    modelViewMatrix[0][1] = 0.0; \n    modelViewMatrix[0][2] = 0.0; \n\n    // second column\n    modelViewMatrix[1][0] = 0.0; \n    modelViewMatrix[1][1] = scale; \n    modelViewMatrix[1][2] = 0.0; \n\n    // third column\n    modelViewMatrix[2][0] = 0.0; \n    modelViewMatrix[2][1] = 0.0; \n    modelViewMatrix[2][2] = scale; \n\n    // position of render plane vertex relative to camera\n    vec4 viewPos = modelViewMatrix * vec4(vertexPos, 1);\n\n    // position of sphere center relative to camera\n    vec4 spherePos = viewMatrix * modelMatrix[3];\n\n    // extend plane sides for complete render of sphere\n    viewPos.x += perspectiveCorrect(spherePos.xz, vertexPos.x);\n    viewPos.y += perspectiveCorrect(spherePos.yz, vertexPos.y);\n\n    // forward world pos of vertex to fragment shader\n    fragPos = (invViewMatrix * viewPos).xyz;\n\n    // corner positions of plane\n    gl_Position = projectionMatrix * viewPos;\n}\n",fragmentShader:"precision highp float;\n#extension GL_OES_standard_derivatives : enable\n\n#define LIGHT_DIR normalize(vec3(1, 0.3, 1))\n#define PI 3.14159265359\n#define MAX 10000\n\n\n// scatter const\n#define RATIO 0.98\n#define RED_OUT 1.0\n\n#define ATMOS_REACH .1\n#define ATMOS_SCALE 50.0\n#define SHINE_THROUGH 0.48\n\n#define NUM_OUT_SCATTER 1.0\n#define NUM_IN_SCATTER 8.0\n\n#define PH_RAY 0.03\n#define PH_MIE 0.002\n\n\n\nuniform vec3 cameraPosition;\nuniform float scale;\nuniform mat4 invViewMatrix;\nuniform mat4 modelMatrix;\n\nuniform sampler2D dayTex;\nuniform sampler2D nrmTex;\nuniform sampler2D auxTex;\n\nvarying vec3 fragPos;\n\nvec2 Sphere(vec3 origin, vec3 ray, float radius);\nvec3 MapUV(vec3 normal, vec3 ray, vec3 lightDir);\nvec3 in_scatter( vec3 o, vec3 dir, vec2 e, vec3 l, float inner, float outer );\n\nvoid main() {\n    float inner = scale * RATIO;\n    float outer = scale;\n\n    vec3 color = vec3(0);\n    \n    // out of screen ray\n    vec3 ray = normalize(cameraPosition - fragPos);\n\n    // atmosphere raycast\n    vec2 outerSphereHits = Sphere(cameraPosition, ray, outer);\n    if (outerSphereHits.x > outerSphereHits.y) {\n        gl_FragColor = vec4(0);\n        return;\n    }\n\n    // planet raycast\n    vec2 innerSphereHits = Sphere(cameraPosition, ray, inner);\n    if (innerSphereHits.x < innerSphereHits.y) {\n        // calculate world normal\n        vec3 worldPos = (ray * innerSphereHits.x);\n        vec3 normalDir = normalize(cameraPosition - worldPos);\n\n        // final earth texture\n        color = MapUV(normalDir, ray, LIGHT_DIR);\n    }\n\n    outerSphereHits.y = min(outerSphereHits.y, innerSphereHits.x);\n\n    vec3 I = in_scatter( cameraPosition, ray, -outerSphereHits.yx, LIGHT_DIR, inner, outer);\n    // color += I;\n    float test = min(1.0, 0.6 + length(pow(I, vec3(1.0 / 2.0))));\n    // color += vec3(pow( I, vec3( 1.0 / 1.2 ) )) * test;\n\n    color += pow(I, vec3(1.5));\n\n    // color *= atmosL;\n\n    gl_FragColor = vec4(color, 1);\n}\n\n// ray intersects sphere\n// e = -b +/- sqrt( b^2 - c )\nvec2 Sphere(vec3 origin, vec3 ray, float radius) {\n\tfloat b = dot(origin, ray);\n\tfloat c = dot(origin, origin) - radius * radius;\n\t\n\tfloat d = b * b - c;\n\tif (d < 0.0) {\n\t\treturn vec2(MAX, -MAX);\n\t}\n\n\td = sqrt(d);\n\treturn vec2(b-d, b+d);\n}\n\n\nvec3 MapUV(vec3 normalDir, vec3 ray, vec3 lightDir) {\n    // https://forum.unity.com/threads/what-is-this-mipmap-artifact.657052/\n    float t = atan(normalDir.x, normalDir.z) / (2.0 * PI);\n\n    float t_a = t + 0.5;\n    float t_b = fract(t + 1.0) - 0.5;\n    \n    vec2 uv = vec2(\n        fwidth(t_a) < fwidth(t_b) ? t_a : t_b,\n        0.5 - asin(-normalDir.y) / PI\n    );\n\n    // texture mapping\n    vec3 dayMap = texture2D(dayTex, uv).rgb;\n    vec3 normalMap = texture2D(nrmTex, uv).rgb * 2.0 - 1.0;\n    vec3 auxMap = texture2D(auxTex, uv).rgb;\n    \n    float lit = auxMap.r;\n    float specular = auxMap.g;\n    float cloud = auxMap.b;\n\n\n    // reflection of water\n    vec3 reflectDir = reflect(-lightDir, normalDir);\n    float reflectAmount = pow(max(dot(ray, reflectDir), 0.0), 6.0) * specular;\n\n    dayMap += vec3(reflectAmount) / 2.0;\n\n    // clouds\n    dayMap = mix(dayMap, vec3(1), vec3(cloud));\n\n    // normal mapPIng\n    vec3 npole = (modelMatrix * vec4(0, 1, 0, 0)).xyz;\n    vec3 tangent = -cross(normalDir, npole);\n    vec3 biTangent = -cross(tangent, normalDir);\n    mat3 tbn = mat3(tangent, biTangent, normalDir);\n\n    vec3 normalMapDir = tbn * normalMap;\n\n    // lighting of earth\n    float shadow = max(0.01, dot(normalMapDir, lightDir));\n    dayMap *= shadow;\n\n    dayMap += lit * pow((1.0 - shadow), 4.0);\n\n    return dayMap;\n}\n\n\n\n// // math const\n// const float MAX = 10000.0;\n\n\n\n// Mie\n// g : ( -0.75, -0.999 )\n//      3 * ( 1 - g^2 )               1 + c^2\n// F = ----------------- * -------------------------------\n//      8PI * ( 2 + g^2 )     ( 1 + g^2 - 2 * g * c )^(3/2)\nfloat phase_mie( float g, float c, float cc ) {\n\tfloat gg = g * g;\n\t\n\tfloat a = ( 1.0 - gg ) * ( 1.0 + cc );\n\n\tfloat b = 1.0 + gg - 2.0 * g * c;\n\tb *= sqrt( b );\n\tb *= 2.0 + gg;\t\n\t\n\treturn ( 3.0 / 8.0 / PI ) * a / b;\n}\n\n// Rayleigh\n// g : 0\n// F = 3/16PI * ( 1 + c^2 )\nfloat phase_ray( float cc ) {\n\treturn ( 3.0 / 16.0 / PI ) * ( 1.0 + cc );\n}\n\n\n\nfloat density( vec3 p, float ph, float d ) {\n\treturn exp( -max( length( p ) - d, 0.0 ) / (ph * ATMOS_REACH) );\n}\n\nfloat optic( vec3 p, vec3 q, float ph, float d ) {\n\tvec3 s = ( q - p ) / NUM_OUT_SCATTER;\n\tvec3 v = p + s * 0.5;\n\t\n\tfloat sum = 0.0;\n\tfor ( float i = 0.0; i < NUM_OUT_SCATTER; i++ ) {\n\t\tsum += density( v, ph, d );\n\t\tv += s;\n\t}\n\tsum *= length( s );\n\t\n\treturn sum;\n}\n\n\nvec3 in_scatter( vec3 o, vec3 dir, vec2 e, vec3 l, float inner, float outer ) {\n\tconst float ph_ray = PH_RAY;\n    const float ph_mie = PH_MIE;\n    \n    const vec3 k_ray = vec3( 7.8, 10.5, 17.1 );\n    const vec3 k_mie = vec3( 27 );\n    const float k_mie_ex = 0.0;\n    \n\tvec3 sum_ray = vec3( 0.0 );\n    vec3 sum_mie = vec3( 0.0 );\n    \n    float n_ray0 = 0.0;\n    float n_mie0 = 0.0;\n    \n\tfloat len = ( e.y - e.x ) / float( NUM_IN_SCATTER );\n    vec3 s = -dir * len;\n\tvec3 v = -o + -dir * ( e.x + len * 0.5 );\n    \n    for ( float i = 0.0; i < NUM_IN_SCATTER; i++ ) {   \n\t\tfloat d_ray = density( v, ph_ray, inner ) * len;\n        float d_mie = density( v, ph_mie, inner ) * len;\n        \n        n_ray0 += d_ray;\n        n_mie0 += d_mie;\n\n        vec2 f = Sphere( v, l, outer * RED_OUT );\n\t\tvec3 u = v - l * f.y;\n        \n        float n_ray1 = optic( v, u, ph_ray, inner );\n        float n_mie1 = optic( v, u, ph_mie, inner );\n\t\t\n        vec3 att = exp( - ( n_ray0 + n_ray1 ) * k_ray - ( n_mie0 + n_mie1 ) * k_mie * k_mie_ex );\n        \n\t\tsum_ray += d_ray * att;\n        sum_mie += d_mie * att;\n\n        v += s; // HACK\n\t}\n\t\n\tfloat c  = dot( dir, -l );\n\tfloat cc = c * c;\n    vec3 scatter =\n        sum_ray * k_ray * phase_ray( cc ) +\n     \tsum_mie * k_mie * phase_mie(SHINE_THROUGH, c, cc );\n    \n\t\n\treturn ATMOS_SCALE * scatter;\n}\n"});return(e=s(this,l(c).call(this,t,i))).onBeforeRender=function(e,n,t,o,a){a.uniforms.invViewMatrix.value=t.matrixWorld},e}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&r(e,n)}(c,te["h"]),c}();function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}new function e(n){var o=this;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"loop",function(e,n){e.getDelta();o.controls.update(),o.renderer.render(o.scene,o.camera),requestAnimationFrame(o.loop.bind(null,e,n))}),u(this,"onWindowResize",function(){var e=o.renderer.domElement,n=e.clientWidth,t=e.clientHeight;o.camera.aspect=n/t,o.camera.updateProjectionMatrix(),o.renderer.setPixelRatio(window.devicePixelRatio),o.renderer.setSize(e.clientWidth,e.clientHeight,!1)}),this.scene=new te.m,this.camera=new te.i(20,window.innerWidth/window.innerHeight,.1,1e3);var t=new c(.5);this.scene.add(t),this.renderer=new te.s({canvas:n}),this.controls=new i(this.camera),this.controls.enableDamping=!0,this.controls.dampingFactor=.05,this.controls.minDistance=3,this.controls.maxDistance=10,this.controls.update(),this.renderer.setClearColor(new te.c("black")),this.onWindowResize();var a=new te.b(!0),r=document.getElementById("fps");this.loop(a,r),window.addEventListener("resize",this.onWindowResize,!1)}(document.getElementById("globe"))}},[["tjUo",4,1,2,3]]]);